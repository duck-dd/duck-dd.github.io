<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.8"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Duck</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="ExampleSite description"><meta name=author content><link rel=canonical href=https://duck-dd.github.io/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.2a8ef18cccda149eb1cd8ec968ba463447d72022979e5c5cae43dcf5d7358750.css integrity="sha256-Ko7xjMzaFJ6xzY7JaLpGNEfXICKXnlxcrkPc9dc1h1A=" rel="preload stylesheet" as=style><link rel=icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://duck-dd.github.io/index.xml><link rel=alternate type=application/json href=https://duck-dd.github.io/index.json><link rel=alternate hreflang=en href=https://duck-dd.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://duck-dd.github.io/"><meta property="og:site_name" content="Duck"><meta property="og:title" content="Duck"><meta property="og:description" content="ExampleSite description"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://duck-dd.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://duck-dd.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Duck"><meta name=twitter:description content="ExampleSite description"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Duck","url":"https://duck-dd.github.io/","description":"ExampleSite description","logo":"https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://duck-dd.github.io/ accesskey=h title="é¦–é¡µ (Alt + H)"><img src=https://duck-dd.github.io/apple-touch-icon.png alt aria-label=logo height=35>é¦–é¡µ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://duck-dd.github.io/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://duck-dd.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://duck-dd.github.io/about title=å…³äº><span>å…³äº</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>è¿™é‡Œæ˜¯duckçš„ç©ºé—´ ğŸ‘‹</h1></header><div class=entry-content>Welcome~ è¯šæŒšçš„æ¬¢è¿ä½ æ¥åˆ°è¿™é‡Œ, ä»»ä½•å†…å®¹éƒ½å¯è¯„è®ºåŒºç•™è¨€, æ¬¢è¿äº¤æµæŒ‡æ­£</div><div class=entry-content><strong>è”ç³»æˆ‘</strong> : <a href=mailto:dianxinztq@126.com>dianxinztq@126.com</a></div><footer class=entry-footer><div class=social-icons></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è£…ä¿®é‚£äº›äº‹å„¿</h2></header><div class=entry-content><p>è¿™ä¸ªè¡Œä¸šï¼Œæ˜¯ä¸€ä¸ªæ²¡æœ‰ç›‘ç®¡ï¼Œæ²¡æœ‰è¡Œä¸šæ ‡å‡†(æœ‰çš„å¤§éƒ¨åˆ†ä¹Ÿæ˜¯æ‰¯æ·¡)ï¼Œç¾¤é­”ä¹±èˆçš„è¡Œä¸šï¼Œè¿™è¡Œä¸šäººçš„è¯ï¼Œä¸è¦ç›¸ä¿¡ï¼Œä¸è¦ç›¸ä¿¡ï¼Œä¸è¦ç›¸ä¿¡
ä»æˆ‘è‡ªèº«ç»å†æ¥è¯´ï¼Œè¿™ä»¶äº‹çœŸçš„ä¸å¤æ‚ï¼Œå®Œå…¨ä¸å€¼ä»–ç°åœ¨çš„ä»·é’±ï¼›ä¸€å¼€å§‹è¿™ä»¶äº‹å¾ˆç¥ç§˜ï¼Œä½ è§‰å¾—ä»˜å¤šå°‘é’±éƒ½æ˜¯åˆç†çš„ï¼Œä½†çœŸä¸æ˜¯è¿™æ ·ï¼Œåˆ°å¤„éƒ½æ˜¯éª—é’±çš„ï¼›æ‰€ä»¥è£…ä¿®å¼€å§‹å‰çœŸæ­£çš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯ä½ è¦äº†è§£ä¸€ä¸‹èƒŒæ™¯è¯„ä¼°ä¸€ä¸‹å·¥ä½œé‡ï¼Œæ”¾å¿ƒå¤§èƒ†çš„å»ç ä»·å§
æœ¬æ–‡ä»è‡ªå·±çš„äº²èº«ç»å†å‡ºå‘æ¥åˆ†æä¸€ä¸‹è£…ä¿®è¿™ä»¶ä»¤äººå¤´ç–¼çš„äº‹æƒ…ï¼Œæ²¡æœ‰å±•å¼€å¤ªå¤šçš„ç»†èŠ‚ï¼Œåªä»¥å„ä¸ªé˜¶æ®µçš„å…¸å‹é€‰æ‹©é¢˜ä¸ºåˆ‡å…¥ç‚¹ï¼Œæ¬¢è¿æŒ‡æ­£å’Œäº¤æµï¼Œé¢„ç¥ä½ è·å¾—ä½ çš„æ¢¦ä¸­æƒ…å±‹ï½
å…¨åŒ… or åŠåŒ… å¦‚æœä½ åˆšå¼€å§‹è€ƒè™‘è£…ä¿®ï¼Œé‚£ä½ ä¸€å®šæ˜¯ç‰¹åˆ«å¼€å¿ƒå’Œå…´å¥‹çš„ã€‚ä½ é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜å¤§æ¦‚å°±æ˜¯ï¼Œâ€œåŠåŒ…â€ or â€œå…¨åŒ…â€ï¼ˆè‡ªå·±æ‰¾å·¥äººçš„æ–¹å¼ï¼Œä¸å¤ªäº†è§£å°±ä¸è°ˆäº†ï¼‰ï¼›å¾ˆå¤šå£°éŸ³ä¼šå‘Šè¯‰ä½ è¯´ï¼Œå…¨åŒ…è¿™ç§å®Œå…¨é»‘ç›’çš„è¡Œä¸ºä¼šæœ‰å¤ªå¤šå‘äº†ï¼Œç»™ä½ ç”¨çš„ä¸œè¥¿éƒ½æ˜¯å·®çš„balabala ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³çœå¿ƒï¼Œæˆ–è€…åœ¨è£…ä¿®çš„è¿™å‡ ä¸ªæœˆé‡Œä½ æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´ç²¾åŠ›èƒ½å¤ŸæŠ•å…¥è¿›è¿™ä»¶äº‹ï¼Œé‚£ä¹ˆè¿˜æ˜¯å»ºè®®ä½ å’¬å’¬ç‰™å¿½ç•¥è¿™äº›æœ‰ä¸€ä¸¢ä¸¢å±è¨€è€¸å¬çš„è¯´æ³•ï¼Œæœæ–­çš„é€‰æ‹©å…¨åŒ…ï¼›å¦‚æœä½ é€‰æ‹©äº†å…¨åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹æœ€ç»ˆæ•ˆæœçš„ç¡®è®¤æ— éé ä¸¤ä¸ªå…³é”®æŒ‡æ ‡
1 æ˜¯ä¸æ˜¯æˆ‘æƒ³è¦çš„æ ·å­ 2 æ˜¯ä¸æ˜¯ç¯ä¿ ä¸ºäº†ç¬¬ä¸€ç‚¹ï¼Œä½ éœ€è¦æŸ¥çœ‹ç´ æåº“ç¡®è®¤å¥½è‡ªå·±å–œæ¬¢çš„æ ·å­ï¼Œè·Ÿè®¾è®¡å¸ˆåšå……åˆ†çš„æ²Ÿé€šï¼Œå¹¶åœ¨æ–½å·¥è¿‡ç¨‹çš„å…³é”®èŠ‚ç‚¹çº¦è®¾è®¡å¸ˆä¸€èµ·å»ç°åœºåšé˜¶æ®µæ€§çš„æ²Ÿé€šå’Œdouble checkï¼Œå› ä¸ºçœå¿ƒï¼Œæ‰€ä»¥ä½ åšçš„åŠŸè¯¾å¯èƒ½ä¸å¤šï¼Œå…¶å®è¿™æ¯”è¾ƒä¾èµ–è®¾è®¡å¸ˆçš„ä¸“ä¸šæ€§ ä¸ºäº†ç¬¬äºŒç‚¹ï¼Œä½ éœ€è¦åšçš„åŠŸè¯¾æ˜¯ï¼ŒæŸ¥ä¸€æŸ¥è£…ä¿®è¿‡ç¨‹ä¸­å“ªäº›ä½¿ç”¨åˆ°çš„ææ–™å¯èƒ½ä¼šä¸ç¯ä¿ï¼Œç„¶åç›´æ¥åœ¨åˆåŒé‡Œå£°æ˜å¥½è¿™äº›ææ–™å…·ä½“ä½¿ç”¨å“ªäº›å“ç‰Œçš„å“ªäº›å‹å·ï¼Œå¹¶åœ¨è¿™äº›ææ–™å…¥åœºæ—¶åšå¥½æ£€æŸ¥(å…¶å®å¯ä»¥æ‰¾ç±»ä¼¼"ç›‘å·¥"çš„è§’è‰²æ¥å¸®åŠ©ä½ æ‰§è¡Œï¼Œåº”è¯¥æ€»æ¯”ä½ å®Œå…¨ä¸å»ç°åœºè¦å¥½)
æœ‹å‹ï¼Œå¦‚æœä½ é€‰æ‹©äº†åŠåŒ…ï¼Œé‚£ä½ æ˜¯çœŸçš„å‹‡å£«ï¼Œå¯¹ä½ è¡¨ç¤ºæ•¬ä½©ï¼Œä»¥ä¸‹çš„è®¨è®ºå’±ä»¬å°±é»˜è®¤ä½ å·²ç»åšäº†å¤§é‡çš„èƒŒæ™¯&åŠŸè¯¾çš„å­¦ä¹ ã€‚
å…¥æˆ·é—¨ æ¢ï¼ä½ 99%ä¸å–œæ¬¢å¼€å‘å•†çš„è¿™ä¸ªï¼Œç›¸æ¯”æ¢é”ï¼Œå°±å¹²è„†ç›´æ¥æ¢é—¨å§
çª—æˆ· å¦‚æœå…è®¸ï¼Œæ¢ï¼æ‹‰æ»¡é…(å¯èƒ½å¾ˆå¤šåœ°æ–¹æ”¿ç­–ä¸å…è®¸åŠ¨å¤–ç«‹é¢ï¼Œé‚£å°±æ²¡åŠæ³•äº†)
éš”éŸ³ å¦‚æœä½ å¯¹å£°éŸ³è¦æ±‚å¾ˆé«˜ï¼Œè€ƒè™‘åšå…¨å±‹éŸ³å“ï¼Œé‚£æ˜¯è‚¯å®šå¾—åšäº† å¦‚æœä½ æ²¡æœ‰è€ƒè™‘åšå…¨å±‹éŸ³å“ï¼Œé‚£ä¹ˆæˆ‘è¿˜æ˜¯å¼ºï¼çƒˆï¼å»ºï¼è®®ï¼åšéš”éŸ³ï¼
å…¨å±‹å®šåˆ¶ or æˆå“å®¶å…· ä¸ªäººè§‚ç‚¹ï¼Œå…¨å±‹å®šåˆ¶çœŸçš„ä¸å’‹åœ°ï¼Œå»ºè®®ç¥›é­…ï¼Œè®¤çœŸçš„å»é€›ä¸€é€›æˆå“å®¶å…·å¸‚åœºï¼› è¿˜å¾€ä¸‹çœ‹ï¼Œä½ æœç„¶è¿˜æ˜¯è·Ÿæˆ‘ä¸€æ ·ï¼Œå¤´é“çš„é€‰æ‹©äº†å…¨å±‹å®šåˆ¶ï¼Œé‚£è¿™ä¸ªå­æ–¹å‘å‘ä¸ªåƒå…«ç™¾ä¸ªè®ºæ–‡æ„Ÿè§‰éƒ½æ³›ä¸èµ·ä¸€ç‚¹æ°´èŠ±ï¼› å•†å®¶è´©å–çš„ç„¦è™‘ç‚¹ï¼šç”²é†›ï¼Œè‹¯ç³»åŒ–åˆç‰©ï¼›ä½ è¦æƒ³æ­»ç£•ï¼Œå¾—å…ˆå­¦åŒ–å­¦ï¼› æ ‡å‡†ï¼šå›½å¤–å›½å†…å¤ªå¤šæ ‡å‡†ï¼Œä½†æœ‰ä¸€ç‚¹ä¸ªäººè§‰å¾—æœ‰å‚è€ƒæ„ä¹‰ï¼Œå°±æ˜¯ æŠ½æ£€ & é€æ£€ ï¼› å“ç‰Œé€‰æ‹©ï¼šå¤§å•†åœºå¤§å“ç‰Œçš„å“ç‰Œæº¢ä»·ç¡®å®å¤ªé«˜äº†ï¼Œè€Œä¸”ä¹Ÿç¡®å®ä»£åŠ å·¥ï¼Œæ‰€ä»¥æœ‰åˆ¤æ–­èƒ½åŠ›é‚£å°±æœæ–­ç›´æ¥æ‰¾å·¥å‚å§ï¼› ç»†èŠ‚ä¸å±•å¼€è®²äº†ï¼Œè¯´ä¸€ç‚¹æ³¨æ„ç‚¹ï¼Œè·Ÿç”µä½/ç®¡é“åšé…åˆè¦æå‰åšè§„åˆ’ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŠŠè¿™ä¸ªé—®é¢˜æ”¾å¾—è¿™ä¹ˆé å‰
å¸ƒå±€ è¯¥ç ¸å°±ç ¸åˆ«çŠ¹è±«(éæ‰¿é‡) æ–°ç Œå¢™æ—¶è€ƒè™‘å¥½ç”¨é€”ï¼Œå¦‚æœæœ‰æ‰¿é‡éœ€æ±‚(ä¾‹å¦‚æŒ‚ç”µè§† æŒ‚æŸœå­ç­‰)ï¼Œè€ƒè™‘å¥½å¢™ä½“çš„ææ–™ ç Œå¢™åå¤šæ™¾ä¸€æ™¾ å¦åˆ™åæœŸå¢™ä¸Šé¢æå¾—ä»»ä½•ä¸œè¥¿éƒ½å®¹æ˜“å‰¥ç¦» å¢™çš„å¹³çš„é—®é¢˜ï¼Œä»å°ç™½è§†è§’æ¥çœ‹ï¼Œå°±æ˜¯è¡¨é¢æ˜¯å¹³é¢ï¼Œå¹¶ä¸”è¿™ä¸ªå¹³é¢è·Ÿå…¶ä»–å¹³é¢çš„è§’åº¦(ä¸€èˆ¬90åº¦)æ˜¯æ­£å¸¸çš„ï¼Œè¿™ç‚¹ä¸ç®¡æ–½å·¥æ–¹æ˜¯å†²ç­‹ å‚å¹³è¿˜æ˜¯å•¥æ–¹æ³•ï¼Œæ€»ä¹‹å…ˆè®²æ¸…æ¥šè¦æ±‚å¹¶è®©ä»–ä»¬ä¸¥æ ¼æ‰§è¡Œ åä¾¿orè¹²ä¾¿ï¼Ÿå¤šä¸ªå«ç”Ÿé—´å¯ä»¥è€ƒè™‘ç•™ä¸€ä¸ªè¹²ä¾¿ï¼Œä¸ä»…å¥åº·ï¼Œè€Œä¸”åæœŸå°å­©ä½¿ç”¨ä¹Ÿæ–¹ä¾¿ï¼Œæˆ–è€…ä¸Šé¢å†æ”¾å°é©¬æ¡¶ä¹Ÿå¥½æ‰©å±•ï¼ˆè¿™ä¸ªé—®é¢˜éœ€è¦æå‰è€ƒè™‘å› ä¸ºå¯èƒ½å½±å“å«ç”Ÿé—´åœ°é¢é«˜åº¦å¸ƒå±€ï¼‰
æ°´ç”µ æ°´ç®¡çº¿ç®¡ä¸€å®šé€‰æ‹©æœ€å¥½çš„å“ç‰Œçš„å¥½çš„å‹å·ï¼Œé¿å…åæœŸå‡ºé—®é¢˜å¤ªéº»çƒ¦ è‡³äºæ˜¯æŒ‰ä½¿ç”¨é•¿åº¦ç®—ï¼Œè¿˜æ˜¯ä¸€å£ä»·æ¨¡å¼ï¼Œè‡ªå·±æ¥è¡¡é‡å¯¹æ¯”ï¼Œæ˜¯å¦ç‚¹å¯¹ç‚¹èµ°çº¿ï¼Ÿå¯ä»¥çœ‹ç½‘ä¸Šå¤§é‡çš„åˆ†æ ç”µç®±ä½ç½®æŒªä¸æŒªï¼Ÿå¦‚æœé£æ°´é—®é¢˜(é‚£ä¹ˆä½ ä¸€å®šæ˜¯ç›¸ä¿¡è¿™ä¸ªçš„)ï¼ŒæŒªï¼›å¦‚æœåªæ˜¯ä¸ºäº†å¥½çœ‹ï¼Œé‚£åæœŸæŒºå¤šæ–¹æ³•å¼„å¥½çœ‹ï¼Œå¯ä»¥çœ‹çœ‹æ•ˆæœè‡ªå·±èƒ½ä¸èƒ½æ¥å— å‰ç½®è¿‡æ»¤å™¨ï¼šç©ºé—´å…è®¸ï¼Œå°±å®‰ï¼›æ‹‰æ»¡é…ï¼Œæœ¬èº«æ²¡å¤šè´µï¼Œå½±å“æ°´å‹å°±ä¸å¥½äº† å…¨å±‹è½¯æ°´ï¼šæ²¡è€ƒè™‘æ¸…æ¥šï¼Œå°±åš ä¸‹æ°´ï¼šæœ‰é¡¾è™‘è¯¥åšçš„ä½ç½®å°±åšï¼Œç”¨ä¸ç”¨å¾—ä¸Šå†è¯´ ç”µä½ï¼šæœ‰é¡¾è™‘å°±åšï¼Œæ€»æ¯”åæœŸæ‹‰æ’çº¿æ¿å¼º(70ä¸ª/100å¹³ ï¼Ÿ) å¼€å…³ï¼šä¸€å¼€å¤šæ§åˆ«é¡¾è™‘ï¼Œæƒ³åšå°±åšï¼Œæ–¹ä¾¿ç”Ÿæ´» å…¨å±‹æ™ºèƒ½ï¼šå·²ç»åœ¨è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†ï¼Ÿé‚£å°±åšã€‚ã€‚ã€‚æœ‰ç‚¹è´µï¼Œè€ƒè™‘å¥½æ€§ä»·æ¯”å§ï¼Œåº”äº†é‚£å¥è¯ï¼Œè´µçš„ä¸œè¥¿ï¼Œé™¤äº†è´µï¼Œæ²¡æœ‰å…¶ä»–çš„æ¯›ç—…ï¼›è¿™é‡Œä¸å±•å¼€è®²äº†ï¼Œå¤ªå¤æ‚äº†ï¼Œå®Œå…¨å¯ä»¥å•å¼€ä¸€é¡µçš„ä¸œè¥¿ï¼›PS:ä»åˆä¸­ç‰©ç†æ¥åˆ†æå…¨å±‹æ™ºèƒ½ï¼Œæ—¢ç„¶æœ‰æ™ºèƒ½æ§åˆ¶å¼€å…³ï¼Œè€Œè¿™ä¸ªå¼€å…³æœ¬èº«ä¹Ÿæ˜¯éœ€è¦ä¾›ç”µçš„ï¼Œé‚£ä¹ˆå¦‚æœæŠŠå¼€å…³ä¸²è”åˆ°ç”µè·¯é‡Œï¼Œä»–å°±ä¸æ˜¯yes or noçš„å¼€å…³ï¼Œå…³é—­çŠ¶æ€æœ¬èº«æ˜¯ä¸€ä¸ªå¤§ç”µé˜»ï¼Œä¹Ÿå°±æ˜¯è¿˜æ˜¯æœ‰å¾®å¼±çš„ç”µæµé€šè¿‡ç”µè·¯ï¼Œè¿™ä¸€å®šæ˜¯ä¸å¥½çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯é¢„ç•™å¥½æ§åˆ¶è·¯çš„é›¶çº¿å§
æœ‰ä¸¤ä¸ªå®¹æ˜“å¿½ç•¥çš„ç‚¹
1 å¢™é¢ä¸èƒ½å¼€é•¿çš„æ¨ªæ§½(è„‘è¡¥ä¸€ä¸‹è¿™ç¡®å®ä¼šå½±å“å¢™çš„ç¨³å®šæ€§) 2 å¼ºå¼±ç”µç£åœºå¹²æ‰°é—®é¢˜ï¼Œç‰©ç†å·²ç»è¿˜ç»™è€å¸ˆäº†ï¼Œä½†æ˜¯é¿å…å¹²æ‰°è¿™ä¸ªè¦ä¿æŒè·ç¦»è¿˜æ˜¯ç¬¦åˆå¸¸è¯†çš„ æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥æœ¨ç“¦æ²¹ç¯èŠ‚
å…¨å±‹åŠé¡¶ or éƒ¨åˆ†åŠé¡¶ å¦‚æœè€ƒè™‘åšæ— ä¸»ç¯ï¼Œé‚£ä¹ˆè‚¯å®šå…¨å±‹åŠé¡¶ å¦‚æœå¯¹å±‚é«˜æœ‰è¦æ±‚ï¼Œé‚£ä¹ˆå°±åˆ«åŠé¡¶ å¦‚æœçŠ¹è±«ï¼Œé‚£ä¹ˆå°±åˆ«åš(æˆ‘è®¤ä¸ºå…¨éƒ¨åŠé¡¶çš„ç›®çš„å°±æ˜¯åšå…‰çº¿çš„è§„åˆ’ï¼ŒçŠ¹è±«çš„è¯è¯´æ˜æ²¡æœ‰è¦æ±‚æˆ–è§„åˆ’ï¼Œé‚£å°±åˆ«åšç®—äº†)
...</p></div><footer class=entry-footer><span title='2023-06-24 20:32:51 +0800 CST'>June 24, 2023</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;134 words</footer><a class=entry-link aria-label="post link to è£…ä¿®é‚£äº›äº‹å„¿" href=https://duck-dd.github.io/posts/decoration/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Golang schedule</h2></header><div class=entry-content><p>å†™åœ¨å‰é¢ runtimeåŒ…å®ç°äº†æ‰€æœ‰goroutine schedulerã€memory allocatorã€garbage collectorç»†èŠ‚ï¼Œç†è®ºä¸Šå¯ä»¥ä»runtimeåŒ…è·å–ä¸€åˆ‡ä¿¡æ¯ï¼Œæ²¡æœ‰ç›´æ¥æ€¼æºç ï¼Œè€Œæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼ˆç›´æ¥åƒå¤§ä½¬ä»¬åƒå‰©ä¸‹çš„ï¼‰ã€‚
æœé›†åˆ°çš„ææ–™ï¼Œå¤§å®¶éƒ½æ˜¯åŸºäºä¸åŒçš„goç‰ˆæœ¬åšçš„åˆ†æï¼Œè€Œgoç‰ˆæœ¬è¿­ä»£è°ƒåº¦ç®—æ³•ä¹Ÿåœ¨æŒç»­æ›´æ–°ï¼Œæ‰€ä»¥æ•´ç†çš„å¯èƒ½æœ‰äº›ä¹±ã€‚ä½†æ˜¯å¯ä»¥ä¿è¯çš„æ˜¯ï¼Œæ‰€æœ‰ææ–™éƒ½æ˜¯GM->GMPæ¼”åŒ–åçš„ææ–™ã€‚
GM go1.1ç‰ˆæœ¬ä»¥å‰ï¼Œè°ƒåº¦ä½¿ç”¨GMæ¨¡å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç®€å•çš„ç†è§£GMæ¨¡å‹ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªå§‹ç»ˆæ‰§è¡Œçš„è°ƒåº¦å‡½æ•°scheduleä¸åœçš„æ‰§è¡Œè°ƒåº¦è®¡ç®—ï¼Œå½“æŸä¸ªMçš„Gæ‰§è¡Œå®Œæˆäº†ï¼Œè°ƒåº¦å™¨å°±æŠŠè¿™ä¸ªMæ”¾å›Mé˜Ÿåˆ—ï¼Œå¯ç»‘å®šæ‰§è¡Œå…¶ä»–Gï¼ˆå¦‚æœæŸä¸ªM+Gå‘ç”Ÿäº†syscallï¼Œé‚£ä¹ˆæœ¬æ¥å¹¶å‘åº¦æ˜¯é€šè¿‡Mæ•°é‡æ§åˆ¶çš„ï¼Œæ­¤æ—¶å¹¶å‘åº¦å°±é™ä½äº†ï¼Ÿï¼‰ï¼›å¦‚æœGæ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºæ–°çš„Gï¼Œä¼šå°†æ–°çš„Gæ”¾å…¥åˆ°Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—çš„æ“ä½œæœ‰ä¸€æŠŠå…¨å±€é”ï¼Œè¿™å¯¼è‡´äº†å„ä¸ªMå¯¹Gå…¨å±€é˜Ÿåˆ—çš„æ“ä½œå­˜åœ¨ä¸¥é‡çš„ç«äº‰ã€‚
ä¸‹é¢è¿™æ®µå®Œå…¨æ˜¯æˆ‘çš„è‡†æµ‹ï¼Œè¯·åˆ«å¤ªç›¸ä¿¡ï¼š
ç®€å•æ¦‚æ‹¬å‘¢ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæœ‰ï¼š
Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—(ä»¥ä¸‹ä¹Ÿå¯èƒ½ç®€ç§°Gå¯æ‰§è¡Œé˜Ÿåˆ—) Må¯ç”¨é˜Ÿåˆ— è°ƒåº¦å™¨è¦åšçš„äº‹å°±æ˜¯ï¼š
ä»Gçš„å¯æ‰§è¡Œé˜Ÿåˆ—å–Gå¹¶ä»Mçš„å¯ç”¨é˜Ÿåˆ—å–Mï¼Œå°†äºŒè€…ç»‘å®šå¼€å§‹æ‰§è¡ŒG å¯¹äºå·²ç»æ‰§è¡Œå®Œçš„Gï¼Œé”€æ¯Gå¹¶ç«‹å³å°†Mé‡Šæ”¾å›Må¯ç”¨é˜Ÿåˆ—ä¾›åç»­ä½¿ç”¨ é‚£ä¹ˆGMæ¨¡å‹æœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ
(é‡ç‚¹é—®é¢˜)å•ä¸€çš„å…¨å±€mutex(sched.lock)å’Œé›†ä¸­çŠ¶æ€ç®¡ç† mutexéœ€è¦ä¿æŠ¤æ‰€æœ‰ä¸å…¨å±€goroutineé˜Ÿåˆ—ç›¸å…³æ“ä½œ(åˆ›å»ºã€å®Œæˆã€é‡æ’ç­‰ç­‰)ï¼Œç«äº‰ä¸¥é‡ (é‡ç‚¹é—®é¢˜)per-Må†…å­˜(M.mcache)é—®é¢˜ æ¯ä¸ªMéƒ½éœ€è¦ä¸€ä¸ªmcacheï¼Œä¼šå¯¼è‡´èµ„æºæ¶ˆè€—è¿‡å¤§(æ¯ä¸ªmcacheå¯ä»¥å¸çº³åˆ°2MBçš„å†…å­˜ç¼“å­˜å’Œå…¶ä»–ç¼“å­˜) ä¸¾ä¸ªæ —å­ï¼Œä¸€ä¸ªé™·å…¥syscallçš„Må¹¶ä¸éœ€è¦ä½¿ç”¨cacheï¼Œä½†æ˜¯åœ¨å…¨éƒ¨çš„Mä¸­ï¼Œé™·å…¥ç³»ç»Ÿè°ƒç”¨çš„Mä¸æ‰§è¡Œgoroutineçš„Mçš„æ¯”ä¾‹å¯èƒ½æ˜¯N:1(N>>1)ï¼Œè¿™å°±å¯¼è‡´äº†N/(N+1)æ¯”ä¾‹çš„mcacheåœ¨é—²ç½® æ•°æ®å±€éƒ¨æ€§å·®: ä¸¾ä¸ªæ —å­ï¼ŒM1æ‰§è¡ŒG1ï¼Œæ­¤æ—¶åˆ›å»ºäº†G2ï¼ŒG2é€šå¸¸æ˜¯ç«‹åˆ»è¿›å…¥äº†Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—ï¼Œè€Œæ­¤æ—¶M1è¿˜åœ¨æ‰§è¡ŒG1ï¼Œæ‰€ä»¥G2é€šå¸¸è¢«å…¶ä»–Mæ‰§è¡Œï¼Œä½†æ˜¯G1å’ŒG2é€šå¸¸å¼ºç›¸å…³ï¼Œæ‰€ä»¥G2æœ€å¥½ä¹Ÿåœ¨M1ä¸Šæ‰§è¡Œï¼Œå› ä¸ºG2å¯¹M1çš„ç¼“å­˜å‘½ä¸­ç‡æ›´é«˜ goroutineä¼ é€’é—®é¢˜ goroutine(G)äº¤æ¥(G.nextg)ï¼ŒMä¹‹é—´ä¼šç»å¸¸äº¤æ¥å¯è¿è¡Œçš„G å†é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯Gç©ºè½¬ï¼Œæœ¬æ¥èƒ½å¤Ÿå¥½å¥½åœ¨ä¸€ä¸ªMä¸Šæ‰§è¡Œå®Œï¼Œä½†æ˜¯ç”±äºå…¨å±€é˜Ÿåˆ—çš„å­˜åœ¨ï¼ŒGä¸€æ—¦å›å…¨å±€é˜Ÿåˆ—äº†ï¼Œä¸‹æ¬¡å°±ä¸çŸ¥é“è¢«å“ªä¸ªMå–èµ°äº†ï¼Œæ‰€ä»¥å«â€œç©ºè½¬â€ï¼›MåŠ è½½Gçš„ä¸Šä¸‹æ–‡æ˜¯æœ‰å¼€é”€çš„ï¼Œæ‰€ä»¥ç©ºè½¬ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ é¢‘ç¹çš„çº¿ç¨‹é˜»å¡/è§£é˜»å¡ syscallsæƒ…å†µä¸‹ï¼Œçº¿ç¨‹ç»å¸¸è¢«é˜»å¡å’Œè§£é˜»å¡ï¼Œå¢åŠ äº†å¾ˆå¤šé¢å¤–å¼€é”€ é€šä¿—ç‚¹è¯´ï¼ŒM+G syscallï¼ŒMé˜»å¡ï¼Œsyscallå®Œæˆåï¼ŒMè§£é˜»å¡ç»§ç»­æ‰§è¡ŒGï¼ˆå¦‚æœæ˜¯é€šè¿‡Mæ•°é‡æ§åˆ¶å¹¶å‘åº¦ï¼Œè¿™æ˜¯ä¸æ˜¯å°±å¯¼è‡´äº†å¹¶å‘åº¦é™ä½ï¼Ÿï¼‰ GMP åŸºäºä»¥ä¸Šè¯´çš„GMçš„é—®é¢˜ï¼Œgo1.1ä»¥åå¼€å§‹ä½¿ç”¨GMPè°ƒåº¦æ¨¡å‹ã€‚ Gã€Mã€Pçš„å®šä¹‰å¦‚ä¸‹(***/src/runtime/runtime2.go)ã€‚
type g struct { // Stack parameters. // stack describes the actual stack memory: [stack.lo, stack.hi). // stackguard0 is the stack pointer compared in the Go stack growth prologue. // It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption. // stackguard1 is the stack pointer compared in the C stack growth prologue. // It is stack.lo+StackGuard on g0 and gsignal stacks. // It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash). stack stack // offset known to runtime/cgo stackguard0 uintptr // offset known to liblink stackguard1 uintptr // offset known to liblink _panic *_panic // innermost panic - offset known to liblink _defer *_defer // innermost defer m *m // current m; offset known to arm liblink sched gobuf syscallsp uintptr // if status==Gsyscall, syscallsp = sched.sp to use during gc syscallpc uintptr // if status==Gsyscall, syscallpc = sched.pc to use during gc stktopsp uintptr // expected sp at top of stack, to check in traceback param unsafe.Pointer // passed parameter on wakeup atomicstatus uint32 stackLock uint32 // sigprof/scang lock; TODO: fold in to atomicstatus goid int64 schedlink guintptr waitsince int64 // approx time when the g become blocked waitreason waitReason // if status==Gwaiting preempt bool // preemption signal, duplicates stackguard0 = stackpreempt preemptStop bool // transition to _Gpreempted on preemption; otherwise, just deschedule preemptShrink bool // shrink stack at synchronous safe point // asyncSafePoint is set if g is stopped at an asynchronous // safe point. This means there are frames on the stack // without precise pointer information. asyncSafePoint bool paniconfault bool // panic (instead of crash) on unexpected fault address gcscandone bool // g has scanned stack; protected by _Gscan bit in status throwsplit bool // must not split stack // activeStackChans indicates that there are unlocked channels // pointing into this goroutine's stack. If true, stack // copying needs to acquire channel locks to protect these // areas of the stack. activeStackChans bool // parkingOnChan indicates that the goroutine is about to // park on a chansend or chanrecv. Used to signal an unsafe point // for stack shrinking. It's a boolean value, but is updated atomically. parkingOnChan uint8 raceignore int8 // ignore race detection events sysblocktraced bool // StartTrace has emitted EvGoInSyscall about this goroutine sysexitticks int64 // cputicks when syscall has returned (for tracing) traceseq uint64 // trace event sequencer tracelastp puintptr // last P emitted an event for this goroutine lockedm muintptr sig uint32 writebuf []byte sigcode0 uintptr sigcode1 uintptr sigpc uintptr gopc uintptr // pc of go statement that created this goroutine ancestors *[]ancestorInfo // ancestor information goroutine(s) that created this goroutine (only used if debug.tracebackancestors) startpc uintptr // pc of goroutine function racectx uintptr waiting *sudog // sudog structures this g is waiting on (that have a valid elem ptr); in lock order cgoCtxt []uintptr // cgo traceback context labels unsafe.Pointer // profiler labels timer *timer // cached timer for time.Sleep selectDone uint32 // are we participating in a select and did someone win the race? // Per-G GC state // gcAssistBytes is this G's GC assist credit in terms of // bytes allocated. If this is positive, then the G has credit // to allocate gcAssistBytes bytes without assisting. If this // is negative, then the G must correct this by performing // scan work. We track this in bytes to make it fast to update // and check for debt in the malloc hot path. The assist ratio // determines how this corresponds to scan work debt. gcAssistBytes int64 } type m struct { g0 *g // goroutine with scheduling stack morebuf gobuf // gobuf arg to morestack divmod uint32 // div/mod denominator for arm - known to liblink // Fields not known to debuggers. procid uint64 // for debuggers, but offset not hard-coded gsignal *g // signal-handling g goSigStack gsignalStack // Go-allocated signal handling stack sigmask sigset // storage for saved signal mask tls [6]uintptr // thread-local storage (for x86 extern register) mstartfn func() curg *g // current running goroutine caughtsig guintptr // goroutine running during fatal signal p puintptr // attached p for executing go code (nil if not executing go code) nextp puintptr oldp puintptr // the p that was attached before executing a syscall id int64 mallocing int32 throwing int32 preemptoff string // if != "", keep curg running on this m locks int32 dying int32 profilehz int32 spinning bool // m is out of work and is actively looking for work blocked bool // m is blocked on a note newSigstack bool // minit on C thread called sigaltstack printlock int8 incgo bool // m is executing a cgo call freeWait uint32 // if == 0, safe to free g0 and delete m (atomic) fastrand [2]uint32 needextram bool traceback uint8 ncgocall uint64 // number of cgo calls in total ncgo int32 // number of cgo calls currently in progress cgoCallersUse uint32 // if non-zero, cgoCallers in use temporarily cgoCallers *cgoCallers // cgo traceback if crashing in cgo call park note alllink *m // on allm schedlink muintptr lockedg guintptr createstack [32]uintptr // stack that created this thread. lockedExt uint32 // tracking for external LockOSThread lockedInt uint32 // tracking for internal lockOSThread nextwaitm muintptr // next m waiting for lock waitunlockf func(*g, unsafe.Pointer) bool waitlock unsafe.Pointer waittraceev byte waittraceskip int startingtrace bool syscalltick uint32 freelink *m // on sched.freem // these are here because they are too large to be on the stack // of low-level NOSPLIT functions. libcall libcall libcallpc uintptr // for cpu profiler libcallsp uintptr libcallg guintptr syscall libcall // stores syscall parameters on windows vdsoSP uintptr // SP for traceback while in VDSO call (0 if not in call) vdsoPC uintptr // PC for traceback while in VDSO call // preemptGen counts the number of completed preemption // signals. This is used to detect when a preemption is // requested, but fails. Accessed atomically. preemptGen uint32 // Whether this is a pending preemption signal on this M. // Accessed atomically. signalPending uint32 dlogPerM mOS // Up to 10 locks held by this m, maintained by the lock ranking code. locksHeldLen int locksHeld [10]heldLockInfo } type p struct { id int32 status uint32 // one of pidle/prunning/... link puintptr schedtick uint32 // incremented on every scheduler call syscalltick uint32 // incremented on every system call sysmontick sysmontick // last tick observed by sysmon m muintptr // back-link to associated m (nil if idle) mcache *mcache pcache pageCache raceprocctx uintptr deferpool [5][]*_defer // pool of available defer structs of different sizes (see panic.go) deferpoolbuf [5][32]*_defer // Cache of goroutine ids, amortizes accesses to runtimeÂ·sched.goidgen. goidcache uint64 goidcacheend uint64 // Queue of runnable goroutines. Accessed without lock. runqhead uint32 runqtail uint32 runq [256]guintptr // runnext, if non-nil, is a runnable G that was ready'd by // the current G and should be run next instead of what's in // runq if there's time remaining in the running G's time // slice. It will inherit the time left in the current time // slice. If a set of goroutines is locked in a // communicate-and-wait pattern, this schedules that set as a // unit and eliminates the (potentially large) scheduling // latency that otherwise arises from adding the ready'd // goroutines to the end of the run queue. runnext guintptr // Available G's (status == Gdead) gFree struct { gList n int32 } sudogcache []*sudog sudogbuf [128]*sudog // Cache of mspan objects from the heap. mspancache struct { // We need an explicit length here because this field is used // in allocation codepaths where write barriers are not allowed, // and eliminating the write barrier/keeping it eliminated from // slice updates is tricky, moreso than just managing the length // ourselves. len int buf [128]*mspan } tracebuf traceBufPtr // traceSweep indicates the sweep events should be traced. // This is used to defer the sweep start event until a span // has actually been swept. traceSweep bool // traceSwept and traceReclaimed track the number of bytes // swept and reclaimed by sweeping in the current sweep loop. traceSwept, traceReclaimed uintptr palloc persistentAlloc // per-P to avoid mutex _ uint32 // Alignment for atomic fields below // The when field of the first entry on the timer heap. // This is updated using atomic functions. // This is 0 if the timer heap is empty. timer0When uint64 // Per-P GC state gcAssistTime int64 // Nanoseconds in assistAlloc gcFractionalMarkTime int64 // Nanoseconds in fractional mark worker (atomic) gcBgMarkWorker guintptr // (atomic) gcMarkWorkerMode gcMarkWorkerMode // gcMarkWorkerStartTime is the nanotime() at which this mark // worker started. gcMarkWorkerStartTime int64 // gcw is this P's GC work buffer cache. The work buffer is // filled by write barriers, drained by mutator assists, and // disposed on certain GC state transitions. gcw gcWork // wbBuf is this P's GC write barrier buffer. // // TODO: Consider caching this in the running G. wbBuf wbBuf runSafePointFn uint32 // if 1, run sched.safePointFn at next safe point // Lock for timers. We normally access the timers while running // on this P, but the scheduler can also do it from a different P. timersLock mutex // Actions to take at some time. This is used to implement the // standard library's time package. // Must hold timersLock to access. timers []*timer // Number of timers in P's heap. // Modified using atomic instructions. numTimers uint32 // Number of timerModifiedEarlier timers on P's heap. // This should only be modified while holding timersLock, // or while the timer status is in a transient state // such as timerModifying. adjustTimers uint32 // Number of timerDeleted timers in P's heap. // Modified using atomic instructions. deletedTimers uint32 // Race context used while executing timer functions. timerRaceCtx uintptr // preempt is set to indicate that this P should be enter the // scheduler ASAP (regardless of what G is running on it). preempt bool pad cpu.CacheLinePad } GMPæ¨¡å‹çš„ä¸€äº›æ¦‚å¿µ ä¸Šé¢Mä¸­æœ‰ä¸¤ä¸ªgéœ€è¦å…³æ³¨ä¸‹ï¼Œcurgå’Œg0ã€‚ curgå°±æ˜¯Må½“å‰ç»‘å®šçš„Gã€‚ g0æ˜¯å¸¦æœ‰è°ƒåº¦æ ˆçš„goroutineï¼Œæ™®é€šçš„Gçš„æ ˆæ˜¯åˆ†é…åœ¨å †ä¸Šçš„å¯å¢é•¿çš„æ ˆï¼Œè€Œg0çš„æ ˆæ˜¯Må¯¹åº”çš„çº¿ç¨‹çš„æ ˆã€‚æ‰€æœ‰è°ƒåº¦ç›¸å…³çš„ä»£ç ï¼Œä¼šå…ˆåˆ‡æ¢åˆ°è¯¥goroutineçš„æ ˆä¸­æ‰§è¡Œã€‚å³ï¼Œçº¿ç¨‹çš„æ ˆä¹Ÿæ˜¯ç”¨çš„gå®ç°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨çš„OSã€‚
...</p></div><footer class=entry-footer><span title='2021-08-21 22:27:31 +0800 CST'>August 21, 2021</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;1904 words</footer><a class=entry-link aria-label="post link to Golang schedule" href=https://duck-dd.github.io/posts/go-schedule/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Golang Tips</h2></header><div class=entry-content><p>è¯´æ˜ï¼š
æŒç»­æ›´æ–°(æ ‡é¢˜å«TODOå…³é”®å­—çš„å°èŠ‚ï¼Œéƒ½ä¼šä»¥topicå¼€å§‹ï¼Œåç»­ä¼šæŒç»­å®Œå–„topic)ã€‚è®°å½•å†…å®¹æ˜¯ä¸€äº›å¯¹æˆ‘è€Œè¨€ï¼š
å°çš„éªšæ“ä½œ(å¯èƒ½æœ‰äº›tricky) å®¹æ˜“ç†è§£åå·®çš„ç‚¹ å†·é—¨çš„ç‚¹(æ²¡å•¥ç”¨çš„ç‚¹) Golangä»£ç æ‰§è¡Œé¡ºåº æ²¡æœ‰å¹¶å‘ï¼Œä¸€ä¸ªé¡ºåºé€»è¾‘ï¼ŒCPUçœŸæ­£æ‰§è¡ŒæŒ‡ä»¤ä¸ä¸€å®šä¸ç¼–ç é¡ºåºå®Œå…¨ä¸€è‡´ï¼ŒGoçš„ç¼–è¯‘å™¨ä¼šåšä¼˜åŒ–ï¼Œå‰ææ˜¯ä¼šè§£å†³ä¾èµ–é€»è¾‘ï¼Œçœ‹èµ·æ¥æ˜¯â€œé¡ºåºæ‰§è¡Œâ€è¿™ä¸€å‡è®¾ã€‚
äº†è§£æ›´å¤šå¯æŸ¥çœ‹Golangå†…å­˜æ¨¡å‹è§„èŒƒã€‚
internalåŒ… internalåŒ…ï¼Œåªèƒ½è¢«å’Œinternalç›®å½•æœ‰åŒä¸€ä¸ªçˆ¶ç›®å½•çš„åŒ…æ‰€å¯¼å…¥ã€‚ ä¾‹å¦‚ï¼Œnet/http/internal/chunkedå†…éƒ¨åŒ…åªèƒ½è¢«net/http/httputilæˆ–net/httpåŒ…å¯¼å…¥ï¼Œä½†æ˜¯ä¸èƒ½è¢«net/urlåŒ…å¯¼å…¥ã€‚ä¸è¿‡net/urlåŒ…å´å¯ä»¥å¯¼å…¥net/http/httputilåŒ…ã€‚
å˜é‡äº¤æ¢ i, j = j, i // äº¤æ¢ i å’Œ j çš„å€¼ forå¾ªç¯æœ‰å…¶ä»–è¯†åˆ«breakçš„å…³é”®å­— forå¾ªç¯å†…æœ‰å…¶ä»–è¯†åˆ«breakçš„å…³é”®å­—æ—¶ï¼Œå…¶ä»–å…³é”®å­—å†…çš„breakä¼šè¢«å…¶è¯†åˆ«è€Œä¸ä¼šè·³å‡ºforï¼Œä»¥ä¸‹ç”¨selectä¸¾ä¾‹ï¼ŒswitchåŒç†ã€‚
for { select { case &lt;-sigChan: // exit for break default: // do something } } ä»¥ä¸Šbreakå¹¶ä¸èƒ½é€€å‡ºforå¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾æˆ–gotoè§£å†³ï¼š
// 1 æ ‡ç­¾ FOR: for { select { case &lt;-sigChan: // exit for break FOR default: // do something } } ---------------------------- // 2 goto for { select { case &lt;-sigChan: // exit for goto ENDFOR default: // do something } } ENDFOR: è¯»å–stdin(åˆ·é¢˜åˆ«å†å› ä¸ºstdinè¸©å‘äº†å–‚) fmtåŒ…å†… Scanç³»åˆ— SScanç³»åˆ— Fscanç³»åˆ—å¦‚ä¸‹ï¼š
...</p></div><footer class=entry-footer><span title='2021-07-01 23:56:44 +0800 CST'>July 1, 2021</span>&nbsp;Â·&nbsp;æ›´æ–°äº:&nbsp;June 22, 2025&nbsp;Â·&nbsp;21 min&nbsp;Â·&nbsp;4386 words</footer><a class=entry-link aria-label="post link to Golang Tips" href=https://duck-dd.github.io/posts/go-tips/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>DNS</h2></header><div class=entry-content><p>DNSï¼ŒæŒºå¥½ï¼Œå•¥æ˜¯DNSï¼Ÿ ä¸€äº›æ¦‚å¿µ FQDN: Fully Qualified Domain Nameï¼Œå…¨é™å®šåŸŸåï¼ŒåŒæ—¶å¸¦æœ‰ä¸»æœºåå’ŒåŸŸåçš„åç§°ï¼ˆé€šè¿‡ç¬¦å·â€œ.â€ï¼‰ï¼Œä¾‹å¦‚ä¸€ä¸ªFQDNæ˜¯www.baidu.comï¼Œwwwæ˜¯ä¸»æœºåï¼Œbaidu.comæ˜¯åŸŸåã€‚å†ä¸¾ä¾‹ï¼Œæˆ‘æ˜¯æµ·æ·€å´å½¦ç¥–ï¼Œä½ æ˜¯**å´å½¦ç¥–ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜çŸ¥é“ï¼Œæœ‰ä¸ªäººå°±å«å´å½¦ç¥–ï¼Œè¿™ä¹ˆå¤šå´å½¦ç¥–æˆ‘ä»¬éƒ½æ²¡æœ‰æ··æ·†ï¼Œå› ä¸ºåå­—å‰é¢åŠ ä¸Šäº†åœ°åŸŸï¼Œä¹Ÿå°±æ˜¯åŸŸåã€‚ä»é€»è¾‘ä¸Šçœ‹FQDNï¼Œå°±æ˜¯ä¸»æœºåçš„å®Œæ•´è¡¨è¾¾ï¼Œç±»ä¼¼ç»å¯¹è·¯å¾„ï¼Œé€šè¿‡ä¸€ä¸ªFQDNæˆ‘ä»¬å¯ä»¥åœ¨å…¨ç½‘å†…é”å®šä¸»æœºä½ç½®ã€‚ cache only DNS server : æœ‰.çš„zone fileçš„DNSæœåŠ¡å™¨ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•è§£ææ•°æ®ï¼Œå®Œå…¨é æŸ¥è¯¢æ¥è·å–æ•°æ®æº forwarding DNS server : è¿.çš„zone fileéƒ½æ²¡æœ‰ï¼Œå®Œå…¨é å‘ä¸Šå±‚æŸ¥è¯¢è·å–æ•°æ®ï¼›å½“ä½¿ç”¨forwardingåŠŸèƒ½æ—¶ï¼Œå³ä½¿æœ¬èº«æœ‰.çš„zone fileï¼Œä¹Ÿä¸ä¼šå‘.æŸ¥è¯¢ï¼Œè¯¥DNS serverè¿˜æ˜¯ä¼šå°†æŸ¥è¯¢å®Œå…¨å§”æ‰˜ç»™ä¸Šå±‚ã€‚ CIDR:Classless Inter-Domain Routing, æ— ç±»åŸŸé—´è·¯ç”±ï¼Œä¸æŒ‰å›ºå®šçš„å­—èŠ‚æ¥åˆ’åˆ†ç½‘ç»œç¼–å·ï¼Œå¯ä»¥ä½¿ç”¨IPåœ°å€ä¸­ä»»ä½•ç›¸é‚»ä½çš„æ•°å­—ä½œä¸ºç½‘ç»œç¼–å·ï¼Œä¾‹å¦‚æŸæœºæ„éœ€è¦2ä¸ªBç±»ç½‘ç»œå¤§å°çš„ç©ºé—´ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å‰15ä½ä½œä¸ºç½‘ç»œç¼–å·ï¼Œä¾‹å¦‚127.127.0.0/15 Aç±»,Bç±»,Cç±»ç½‘ç»œï¼šAç±»ç½‘ç»œä»¥IPåœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚(å‰8ä½)ä½œä¸ºç½‘ç»œç¼–å·,å‰©ä¸‹çš„24ä½ä¸ºä¸»æœº;Bç±»ç½‘ç»œå‰ä¸¤ä¸ªå­—èŠ‚ä¸ºç½‘ç»œç¼–å·;Cç±»ç½‘ç»œå‰ä¸‰ä¸ªå­—èŠ‚ä¸ºç½‘ç»œç¼–å· DNSåšä»€ä¹ˆ ipv4 32bitï¼Œipv6 128bitï¼Œå³ä½¿è½¬æˆ10/16è¿›åˆ¶ä¹Ÿæ²¡äººè®°å¾—ä½ï¼Œä½†æ˜¯äººç±»çš„å¤´è„‘å–„äºè®°å½•åå­—ï¼Œæ‰€ä»¥å¯ä»¥æä¸€ä¸ªåå­—è·ŸIPå¯¹åº”ï¼Œåå­—è·ŸIPçš„å¯¹åº”å…³ç³»è§£æï¼Œå°±æ˜¯DNSæä¾›çš„æœåŠ¡ã€‚
ä¸»æœºåçš„è§£ææœ‰ä¸€ä¸ªå‘å±•çš„è¿‡ç¨‹ã€‚
æœ€åˆæ²¡æœ‰DNSäººä»¬å¦‚ä½•è®°ä½å„ä¸ªæœåŠ¡åå­—è·ŸIPçš„å¯¹åº”å…³ç³»å‘¢ï¼Ÿå°±æ˜¯å†™åœ¨/etc/hostsæ–‡ä»¶é‡Œï¼Œè‡ªå·±å†™éº»çƒ¦ï¼Œé‚£å°±ç»Ÿä¸€å†™åˆ°ä¸­å¿ƒï¼Œä½¿ç”¨çš„æ—¶å€™ä»ä¸­å¿ƒæ‹‰å–ã€‚
è¿™ä¸ªä¸­å¿ƒå°±æ˜¯internicï¼Œä¸»æœºåIPå¯¹åº”å…³ç³»ä¿®æ”¹æ—¶ï¼Œæ³¨å†Œåˆ°internicä¸­ï¼›ç”¨æˆ·å‡†å¤‡ä¸Šç½‘ä¹‹å‰å…ˆå»internicæŠŠæœ€æ–°çš„æ–‡ä»¶æ‹‰ä¸‹æ¥ï¼Œæ”¾åœ¨è‡ªå·±çš„/etc/hostsã€‚
è¿™ç§æ–¹å¼é—®é¢˜å¾ˆå¤šï¼š
ä¾‹å¦‚internicæ‹‰å–çš„æ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œæ¯æ¬¡æ‰“å¼€ç”µè„‘å…ˆæ‹‰ä¸ª100Gçš„æ–‡ä»¶ç„¶åå†å¼€å§‹ä¸Šç½‘ï¼Œå°±ç®—ä½ ç£ç›˜æ‰›å¾—ä½ï¼Œä½ çš„ç½‘ç»œä¸å¤Ÿå¥½ä¹Ÿå¾ˆéš¾å—ï¼ˆå› ä¸ºä½ ä¸èƒ½æ˜ç¡®è¯´æ˜è‡ªå·±ä¸Šç½‘éœ€è¦çš„ä¸»æœºåï¼Œåªèƒ½æ‹‰å…¨é‡ï¼Œäº’è”ç½‘ä¸šåŠ¡å¢é•¿è¯¥æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼‰ ä¾‹å¦‚è¿™ç§æ–¹å¼æ˜¯é™æ€çš„ï¼Œéœ€è¦ç”¨æˆ·ä¸»åŠ¨è§¦å‘æ›´æ–°è¡Œä¸ºï¼ˆä½ æ€»ä¸èƒ½è®©ä¸€ä¸ªäººå¼€æœºé»˜è®¤å°±å»ä¸‹è½½100Gçš„æ–‡ä»¶ï¼Œä»–ä¸å¯èƒ½ç»™ä½ æˆæƒçš„ï¼‰ï¼›è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç½‘ç˜¾å°‘å¹´ä¸‹åˆ6ç‚¹ç¡çœ¼æƒºå¿ªçš„èµ·åºŠï¼Œæ‰“å¼€ç”µè„‘å…ˆä»internicä¸‹è½½äº†åŠä¸ªå°æ—¶æ–‡ä»¶ï¼ŒæœŸé—´å»æ´—æ¼±åƒäº†æ—©é¥­ï¼Œç„¶åå¼€å¼€å¿ƒå¿ƒå¼€å§‹æ‰“æ¸¸æˆï¼Œçªç„¶ï¼Œæ¸¸æˆæ‰çº¿äº†ï¼Œä¸Šè´´å§ä¸€æŸ¥ï¼Œå¤§å®¶éƒ½è¯´å¿«å»é‡æ–°æ‹‰å–internicçš„hostsæ–‡ä»¶å‘€ï¼Œæ¸¸æˆåŸŸåè¢«å‹å•†æ”»å‡»æ¢åŸŸåäº†ï¼Œè¿™è¿˜å¥½ï¼Œå°‘å¹´éª‚éª‚å’§å’§ä¸‹è½½ä¸ªæ–‡ä»¶å°±å®Œäº‹äº†ï¼Œè¦æ˜¯è´´å§éƒ½ä¸Šä¸å»å°±æ›´è®©äººæ‡µé€¼äº† æ—¶ä»£çš„è¿›æ­¥æ€»æ˜¯èªæ˜äººæ¨åŠ¨çš„ã€‚Berkeleyä¸€ä¸ªåŒå­¦å°±è§‰å¾—è¿™ç§æ–¹å¼ä¸å¤ªè¡Œï¼Œäºæ˜¯ä»–å°±æå‡ºä¸€å¥—BINDç³»ç»Ÿæä¾›DNSæœåŠ¡ã€‚
BINDï¼ŒBerkeley Internet Name Domain BINDç®¡ç†æ–¹å¼ BINDæ˜¯ä¸€å¥—é˜¶å±‚å¼çš„ç®¡ç†ä¸»æœºåä¸IPå¯¹åº”å…³ç³»çš„ç³»ç»Ÿã€‚
é˜¶å±‚å¼ï¼Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºæ ‘çŠ¶ç»“æ„çš„ä¸åŒå±‚çº§ï¼Œä¸‹é¢æ¥ç®€å•åˆ†æä¸‹é˜¶å±‚å¼ã€‚
ä»¥www.baidu.comä¸ºä¾‹ï¼Œæœ€ä¸Šå±‚æ ¹æœåŠ¡å™¨ï¼Œdomain nameæ˜¯"."ï¼Œç„¶åæœ‰ä¸‰ä¸ªhostname â€œnet com cnâ€ï¼Œå†åˆ°ç¬¬ä¸‰å±‚ï¼Œhostnameåˆ†åˆ«æ˜¯pdd baidu tencentï¼Œæ­¤æ—¶domain nameä¸º.com. ï¼Œä»¥æ­¤ç±»æ¨ã€‚ã€‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ¯ä¸€ä¸ª".â€œéƒ½æ‹†åˆ†domain name&amp;hostnameï¼Œä¾‹å¦‚ä¸Šå›¾ video.www.baidu.com ï¼Œå…¶ä¸­domain nameä¸ºbaidu.com.ï¼Œhostnameä¸ºvideo.wwwã€‚æŒ‰ç…§ä¸Šè¿°æ–¹å¼åˆ†å±‚ï¼Œæ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼ˆæƒå¨ï¼‰åªè´Ÿè´£è‡ªå·±çš„ä¸€å°æ’®åŸŸåï¼Œè¿™å°±é¿å…äº†å¤§é‡æ•°æ®é›†ä¸­çš„é—®é¢˜ã€‚
DNSé˜¶å±‚ç³»ç»Ÿçš„æœ€ä¸Šæ–¹æ˜¯ä¸€ä¸ªâ€."ï¼Œrootï¼Œæ˜¯æ ¹æœåŠ¡å™¨ï¼Œæœ¬è´¨ä¸Šè®²ï¼Œè¿™é‡Œçš„".â€œåé¢å…¶å®æ˜¯ç©ºæ ‡ç­¾ï¼Œè¿™æ˜¯ä¸ºrootä¿ç•™çš„ï¼›æ ¹æœåŠ¡å™¨ä¸‹ä¸€å±‚ç®¡ç†çš„æ˜¯Top Level Domains(TLD)ï¼Œä¾‹å¦‚com. net. org.ç­‰ç­‰ã€‚
æ¯ä¸ªä¸Šä¸€å±‚çš„DNSæœåŠ¡å™¨ï¼Œæ‰€è®°å½•çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸‹ä¸€å±‚çš„ä¸»æœºåï¼›å†ä¸‹ä¸€å±‚ï¼Œæˆæƒç»™å†å†ä¸‹å±‚æŸä¸ªä¸»æœºç®¡ç†ï¼Œè¿™å°±æ˜¯åˆ†å±‚ç®¡ç†ï¼›DNSåˆ†å±‚æœ€å¤šåˆ°127å±‚(å®é™…ä¸Šä¸ä¼šç”¨åˆ°è¿™ä¹ˆå¤š)ï¼Œæ¯ä¸€å±‚æœ€å¤š63ä¸ªå­—ç¬¦(ä¸åŒ…æ‹¬â€.")ï¼›åŒä¸€å±‚å†…ä¸å…è®¸åŒåï¼Œç¡®ä¿å”¯ä¸€æ€§ã€‚
BINDæŸ¥è¯¢æµç¨‹ å½“æµè§ˆå™¨è¾“å…¥ https://www.baidu.com ï¼Œå…ˆæŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œå†æŸ¥/etc/hostsæ–‡ä»¶ï¼Œéƒ½æ‰¾ä¸åˆ°www.baidu.comçš„è§£ææ—¶ï¼Œä¼šæ ¹æ®/etc/resolv.confæ–‡ä»¶å†…é…ç½®çš„DNSæœåŠ¡å™¨åœ°å€ï¼Œå»è¿›è¡ŒDNSè§£æï¼Œè¯¢é—®www.baidu.comçš„Aè®°å½• clientç¬¬ä¸€æ­¥æ‰¾åˆ°çš„DNSæœåŠ¡å™¨é€šå¸¸ä¸ºè¿è¥å•†æä¾›çš„local DNSæœåŠ¡å™¨ï¼Œlocal DNSä½œä¸ºåç§°æœåŠ¡å™¨ï¼Œæ¥æ”¶clientç«¯çš„é€’å½’æŸ¥è¯¢è¯·æ±‚ï¼Œè‹¥local DNSæœåŠ¡å™¨è‡ªèº«æ²¡æœ‰www.baidu.comçš„è§£æç»“æœï¼Œåˆ™å‘.DNSæœåŠ¡å™¨å‘èµ·è§£æè¯·æ±‚ï¼Œè¯¢é—®www.baidu.comæ˜¯å•¥Aè®°å½•å‘¢ï¼Ÿ å…¶å®é€’å½’æŸ¥è¯¢å®é™…è¿‡ç¨‹ä¸­ï¼Œlocal DNSè‹¥æœªå‘½ä¸­ç¼“å­˜ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æŸ¥è¯¢æ ¹æœåŠ¡å™¨ï¼Œä»–ä¼šå¯»æ‰¾å·²çŸ¥æœ€è¿‘çš„åç§°æœåŠ¡å™¨(å¾…å®éªŒç¡®è®¤) .å¹¶ä¸çŸ¥é“www.baidu.comçš„IPï¼Œå®ƒä¼šå‘Šè¯‰ä½ æˆ‘åªçŸ¥é“.comï¼ŒIPç»™ä½ ï¼Œä½ å»é—®å®ƒå§ ç„¶ålocal DNSè·å–åˆ°äº†.comçš„ä¿¡æ¯åï¼Œå¼€å§‹å‘.comè¯¢é—®www.baidu.comçš„è§£æç»“æœ .comä¹Ÿä¸çŸ¥é“www.baidu.comçš„IPåœ°å€ï¼Œå®ƒä¼šè¯´ï¼Œæˆ‘åªè®¤è¯†baidu.comï¼Œä½ å»é—®å®ƒå§ .comè¿”å›çš„ä¸€èˆ¬æ˜¯baidu.comçš„å¤šä¸ªNSåŸŸå(åŠå…¶IP,èƒ¶æ°´è®°å½•)ï¼Œå¦‚ä¸‹ä¾‹å›¾ï¼Œé‚£ä¹ˆå¦‚ä½•é€‰æ‹©æƒå¨å‘¢ï¼ŸBINDåç§°æœåŠ¡å™¨ä½¿ç”¨RTT(roundtrip time)çš„åº¦é‡æ–¹å¼æ¥é€‰æ‹©å¯¹åŒä¸€åŒºåŸŸä¸­çš„åç§°æœåŠ¡å™¨è¿›è¡Œé€‰æ‹©ï¼Œå³é€‰æ‹©RTTæœ€å°çš„é‚£ä¸ªåç§°æœåŠ¡å™¨(dig +traceæŠ“åŒ…å¹¶æ²¡çœ‹åˆ°å¯¹RTTçš„æ¢æµ‹ï¼Œç°è±¡ä¸Šçœ‹æ˜¯ä»ns*.baidu.comé‡Œé¢éšæœºé€‰æ‹©çš„ï¼Ÿ) ...</p></div><footer class=entry-footer><span title='2021-05-13 20:53:32 +0800 CST'>May 13, 2021</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;847 words</footer><a class=entry-link aria-label="post link to DNS" href=https://duck-dd.github.io/posts/dns/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://duck-dd.github.io/>Duck</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>