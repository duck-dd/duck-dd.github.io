<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.8"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Duck</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="ExampleSite description"><meta name=author content><link rel=canonical href=https://duck-dd.github.io/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.2a8ef18cccda149eb1cd8ec968ba463447d72022979e5c5cae43dcf5d7358750.css integrity="sha256-Ko7xjMzaFJ6xzY7JaLpGNEfXICKXnlxcrkPc9dc1h1A=" rel="preload stylesheet" as=style><link rel=icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://duck-dd.github.io/index.xml><link rel=alternate type=application/json href=https://duck-dd.github.io/index.json><link rel=alternate hreflang=en href=https://duck-dd.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><meta property="og:url" content="https://duck-dd.github.io/"><meta property="og:site_name" content="Duck"><meta property="og:title" content="Duck"><meta property="og:description" content="ExampleSite description"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://duck-dd.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://duck-dd.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Duck"><meta name=twitter:description content="ExampleSite description"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Duck","url":"https://duck-dd.github.io/","description":"ExampleSite description","logo":"https://duck-dd.github.io/%3Clink%20/%20abs%20url%3E","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://duck-dd.github.io/ accesskey=h title="é¦–é¡µ (Alt + H)"><img src=https://duck-dd.github.io/apple-touch-icon.png alt aria-label=logo height=35>é¦–é¡µ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://duck-dd.github.io/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://duck-dd.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://duck-dd.github.io/about_me title=å…³äºæˆ‘><span>å…³äºæˆ‘</span></a></li><li><a href=https://duck-dd.github.io/about_space title=å…³äºè¿™é‡Œ><span>å…³äºè¿™é‡Œ</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>Duck&rsquo;s space ğŸ‘‹ ğŸ‘‹ ğŸ‘‹</h1></header><div class=entry-content>æ¬¢è¿ä½ æ¥åˆ°è¿™é‡Œ, äº¤æµå¯ä»¥è¯„è®ºåŒºç•™è¨€æˆ–è€…é‚®ä»¶ <strong><a href=mailto:dianxinztq@126.com>dianxinztq@126.com</a></strong></div><footer class=entry-footer><div class=social-icons></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å°å°¼</h2></header><div class=entry-content><p>æœ€è¿‘æ·±åº¦å‚ä¸ä¸€äº›æµ·å¤–ä¸šåŠ¡ï¼Œä»Šå¤©äº†è§£ä¸€ä¸‹å°å°¼ã€‚
åç§°ï¼šå°åº¦å°¼è¥¿äºš å°å°¼ é¦–éƒ½ï¼šé›…åŠ è¾¾(Jakartaï¼Œç¼©å†™JKT) é€æ­¥è¿ç§»è‡³ åŠªå±±å¡”æ‹‰(Ibu Kota Nusantaraï¼Œç¼©å†™IKN) å›½åœŸé¢ç§¯ï¼š191.4ä¸‡å¹³æ–¹å…¬é‡Œ(é™†) 316.6ä¸‡å¹³æ–¹å…¬é‡Œ(æµ·) ä½ç½®ï¼šäºšæ´²ä¸œå—éƒ¨ï¼Œå¤ªå¹³æ´‹å°åº¦æ´‹ä¹‹é—´ æ°”å€™ï¼šèµ¤é“æµ·æ´‹æ€§æ°”å€™ï¼›ç‚çƒ­ï¼Œæ½®æ¹¿å¤šé›¨ï¼›æ—±å­£6-9æœˆï¼Œé›¨å­£12-3æœˆ é‚»(è¿‘)å›½ï¼šå·´å¸ƒäºšæ–°å‡ å†…äºš ä¸œå¸æ±¶ é©¬æ¥è¥¿äºš æ³°å›½ æ–°åŠ å¡ è²å¾‹å®¾ æ¾³å¤§åˆ©äºš äººå£ï¼šçº¦3äº¿ ä¸–ç•Œç¬¬å›› æ”¿æ²»ä½“åˆ¶ï¼šæ€»ç»Ÿåˆ¶å…±å’Œåˆ¶ ç»æµåˆ¶åº¦ï¼šå¸‚åœºç»æµä½“åˆ¶ ç¤¾ä¼šåˆ¶åº¦ï¼šèµ„æœ¬ä¸»ä¹‰åˆ¶åº¦ è´§å¸ï¼šå°åº¦å°¼è¥¿äºšç›¾ï¼Œç®€ç§°å°å°¼ç›¾ï¼Œè´§å¸ä»£ç IDRï¼Œè´§å¸ç¬¦å·RP GDPï¼š 2024ï¼šåä¹‰GDPä¸º22138.96ä¸‡äº¿å°å°¼ç›¾ï¼Œåä¹‰GDPæŠ˜åˆ13967.87äº¿ç¾å…ƒ å¯¹æ¯”ä¸­å›½ï¼Œ2024 ä¸­å›½å¤§é™†åä¹‰GDPæ€»é‡æŠ˜åˆ189433.42äº¿ç¾å…ƒ ç«‹æ³•ï¼šæ¯ä¸ªçœæœ‰è‡ªå·±çš„ç«‹æ³•æœºå…³ æ–‡åŒ–ï¼šä¼ ç»Ÿæœé¥°â€œå·´è¿ªå…‹â€ï¼›èˆè¹ˆ(å·´å˜èˆï¼Œçˆªå“‡èˆ)ï¼›é›•å¡‘ å®—æ•™ä¿¡ä»°ï¼šä¼Šæ–¯å…°æ•™(87%) åŸºç£æ•™(6%) å¤©ä¸»æ•™(3.6%) ç¾é£Ÿï¼šæ²™å—²ã€å°å°¼ç‚’é¥­ã€gado-gadoï¼ˆä»€é”¦è”¬èœæ²™æ‹‰ï¼‰ç­‰ï¼›å£å‘³èåˆäº†ç”œã€è¾£ã€é…¸ç­‰ å›½å®¶å†…éƒ¨ è¡Œæ”¿åŒºåŸŸ/åœ°ç†åŒºåŸŸ åˆ’åˆ†ï¼š çœ â€”> å¿/å¸‚ â€”> åŒº â€”> æ‘/ç¤¾åŒº 38ä¸ªçœ ä¸»è¦åŸå¸‚ï¼š é›…åŠ è¾¾(Jakarta, JKT)ï¼šå°å°¼æœ€å¤§çš„åŸå¸‚ï¼Œä½äºçˆªå“‡å²›è¥¿åŒ—éƒ¨æ²¿æµ· æ³—æ°´(Surabaya, SUB,SUR)ï¼šå°å°¼ç¬¬äºŒå¤§åŸå¸‚ï¼Œä¸œçˆªå“‡çœçš„çœä¼šï¼Œä½äºçˆªå“‡å²›ä¸œåŒ—æ²¿æµ·çš„æ³—æ°´æµ·å³¡è¥¿å—ä¾§ ä¸‡éš†ï¼ˆBandung, BDOï¼‰ï¼šè¥¿çˆªå“‡çœçš„çœä¼šï¼Œä½äºçˆªå“‡å²›è¥¿éƒ¨çš„ä¸‡éš†ç›†åœ°ä¸­ æ£‰å…°ï¼ˆMedan, MESï¼‰ï¼šè‹åŒ—çœçœä¼šï¼Œä½äºè‹é—¨ç­”è…Šå²›åŒ—éƒ¨ï¼Œæ˜¯è‹é—¨ç­”è…Šå²›æœ€å¤§åŸå¸‚ ä¸‰å®å„ï¼ˆSemarang, SRG,CGKï¼‰ï¼šä¸­çˆªå“‡çœçš„çœä¼šï¼Œä½äºçˆªå“‡å²›ä¸­éƒ¨åŒ—å²¸ï¼Œæ˜¯çˆªå“‡å²›ä¸­éƒ¨åœ°åŒºé‡è¦çš„äº¤é€šæ¢çº½åŠå•†å“é›†æ•£åœ° æœ›åŠ é”¡ï¼ˆMakassar, MAK,UPGï¼‰ï¼šå—è‹æ‹‰å¨è¥¿çœçš„çœä¼šï¼Œä½äºè‹æ‹‰å¨è¥¿å²›å—ç«¯ï¼Œæ˜¯è‹æ‹‰å¨è¥¿å²›æœ€å¤§çš„åŸå¸‚ ç™»å·´è¨ï¼ˆDenpasar, DPSï¼‰ï¼šå·´å˜çœçš„çœä¼šï¼Œä½äºå·´å˜å²›å—éƒ¨ï¼Œæ˜¯å·´å˜å²›çš„æ”¿æ²»ã€ç»æµå’Œæ–‡åŒ–ä¸­å¿ƒ å†å²è¿›ç¨‹ç®€è¿°ï¼š å…¬å…ƒ3-7ä¸–çºªå¼€å§‹æœ‰éƒ¨è½è®°è½½ 13ä¸–çºªæœ«14ä¸–çºªåˆï¼Œæ»¡è€…ä¼¯å¤·å¸å›½åœ¨ä¸œçˆªå“‡å»ºç«‹ 1602å¹´è·å…°æˆç«‹ä¸œå°åº¦å…¬å¸ï¼Œæˆä¸ºè·å…°æ®–æ°‘åœ° 1942å¹´æ—¥æœ¬å…¥ä¾µï¼Œå°å°¼è¿›å…¥æ—¥æœ¬ç»Ÿæ²»æ—¶æœŸ 1945å¹´8æœˆ15æ—¥ï¼Œæ—¥æœ¬æŠ•é™ï¼Œè‹åŠ è¯ºå®£å¸ƒå°åº¦å°¼è¥¿äºšç‹¬ç«‹ 1949å¹´12æœˆï¼Œè·å…°æ­£å¼æ‰¿è®¤å°å°¼ç‹¬ç«‹ 1970å¹´ä»£åï¼Œä»ä¼ ç»Ÿçš„è®¡åˆ’ç»æµå‘å¸‚åœºç»æµè½¬å˜</p></div><footer class=entry-footer><span title='2025-08-15 00:00:00 +0000 UTC'>2025-08-15</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2025-08-15&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;69 words</footer><a class=entry-link aria-label="post link to å°å°¼" href=https://duck-dd.github.io/posts/%E5%8D%B0%E5%B0%BC/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ç›®æ ‡ç®¡ç†æ³•</h2></header><div class=entry-content><p>å½“æˆ‘ä»¬å†™KPIæ—¶ï¼Œæˆ‘ä»¬åœ¨å†™ä»€ä¹ˆï¼Ÿå½“æˆ‘ä»¬å†™OKRæ—¶ï¼Œæˆ‘ä»¬åœ¨å†™ä»€ä¹ˆï¼Ÿ
è¿™ä¸ªé—®é¢˜å›°æ‰°äº†è®¸ä¹…ï¼Œä»ä¸ªäººçš„è§’åº¦ï¼Œæˆ‘ä¸€ç›´æŠŠè¿™äº›ä¸œè¥¿å½“æˆæ·é”ï¼Œä»Šæ™šçªç„¶å¯»æ€ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¸èƒ½è®¤çœŸå®¡è§†è¿™ä¸ªä¸œè¥¿ï¼Œæ—¢ç„¶æ€»æ˜¯è¦èŠ±ç²¾åŠ›æ¥å¤„ç†ï¼Œé‚£ä¸å¦‚æŠŠè¿™ä¸ªå·¥å…·ç”¨èµ·æ¥ã€‚ äººéƒ½æ˜¯æ¸´æœ›è‡ªç”±çš„ï¼Œæˆ–è€…è‡³å°‘è¿™ä¹ˆè¯´ï¼Œæ”¾çºµæ€»æ˜¯ä½¿ç»å¤§å¤šæ•°äººå¿«ä¹çš„ï¼›æ‰€ä»¥å‰é¢æˆ‘ä»¬è¯´ç›®æ ‡ç®¡ç†æ˜¯ä¸€ç§æ·é”ï¼Œä½†æ˜¯æ·é”æœªå¿…æ˜¯åçš„ä¸œè¥¿ï¼Œå®ƒä¹Ÿå¯èƒ½æ˜¯ä¸€ç§æ¨ä½ å‘ä¸Šçš„åŠ¨åŠ›ã€‚ åœ¨ç¬¬ä¸€æ¬¡å·¥ä½œä¸­æ¥è§¦OKRæ—¶ï¼Œæˆ‘å½“å¤©å°±ç»™è‡ªå·±çš„ç”Ÿæ´»ä¹Ÿå®šäº†å¥½å‡ ä¸ªOKRï¼Œè™½ç„¶ä¸€ä¸ªä¹Ÿæ²¡å®ç°ï¼Œä½†æ˜¯å´è¿˜æ˜¯ç»™äº†æˆ‘ä¸€äº›æŒ£æ‰çš„åŠ¨åŠ›æ¥å¾€å‰èµ°äº†å‡ æ­¥ã€‚æ±‚å…¶ä¸Šè€…å¾—å…¶ä¸­ï¼Œæ±‚å…¶ä¸‹è€…æ— æ‰€å¾—ï¼Œå¸Œæœ›æ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ°¸è¿œä¿æŒå¯¹Oçš„æ— ä¸Šæ†§æ†¬ã€‚
æˆ‘ç†è§£çš„ O+KR å¯¹äºOï¼Œæˆ‘è®¤ä¸ºå°±ä¸€ä¸ªåŸåˆ™ï¼ŒæŠŠæœ€ç»ˆçŠ¶æ€æè¿°æ¸…æ¥šï¼Œè¿™ä¸ªçŠ¶æ€ä¸€èˆ¬æ¯”è¾ƒé¥è¿œ(ç¾å¥½)ä½†å´ä¸æ˜¯é¥ä¸å¯åŠ(åŠ¡å®)ï¼Œç²¾é«“åœ¨äºå¯¹äº é¥è¿œ çš„æŠŠæ§ã€‚
å¯¹äºKRï¼Œäººä»¬å¸¸è¯´çš„æœ€å…³é”®çš„ç‰¹æ€§å°±æ˜¯ï¼Œå¯é‡åŒ–ã€‚ä¸€ç»„KRæ˜¯è¾¾æˆä¸€ä¸ªOçš„å…·ä½“è¡ŒåŠ¨æŒ‡å¼•listï¼Œæ¯ä¸€ä¸ªKRçš„åˆ¶å®šéœ€è¦æå‰è€ƒè™‘å¥½ä»–çš„é‡åŒ–è¯„ä¼°æŒ‡æ ‡ï¼Œæ¯ä¸€ä¸ªKRæ˜¯å¯è¯„ä¼°çš„è¿™æ ·æ‰èƒ½å¤Ÿä¿è¯Oæ˜¯å¯è¯„ä¼°çš„ï¼Œé‚£ä¹ˆè¿™ä¸€ç»„OKRæ‰æ˜¯æœ‰æ„ä¹‰çš„ã€‚
ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š
O1: æˆ‘è¦åšä¸€ä¸ªå¸…å“¥(è¿™ä¸ªOå¾ˆç¾å¥½ï¼Œèƒ½å¤Ÿå……åˆ†æ¿€å‘ä¸»è§‚èƒ½åŠ¨æ€§(ç‰›é©¬å·¥å‚ç®¡è¿™å«owneræ„è¯†)) KR1: å…«å—è…¹è‚Œ(è¿™ä¸ªKRåˆ¶å®šçš„å¾ˆå¥½ï¼Œé‡åŒ–æ–¹å¼å¾ˆç®€å•) KR2: çš®è‚¤çŠ¶æ€å˜å¥½(è¿™ä¸ªKRå®šçš„ä¸å¥½ï¼Œâ€œçŠ¶æ€å˜å¥½â€å¾ˆéš¾é‡åŒ–ï¼Œéƒ½ä¸å¦‚æ”¹æˆ12ç‚¹å‰ç¡è§‰/ä¸€å¹´ç”¨å…‰ä¸€ç“¶æ´—é¢å¥¶/æ¯ä¸ªæœˆç”¨å®Œ10ç‰‡é¢è†œ) KR3: æä¸ªé…·é…·çš„å‘å‹(è¿™ä¸ªKRåˆ¶å®šçš„ä¹Ÿä¸å¤ªå¥½ï¼Œæœ‰ä¸€ç‚¹è¿‡äºå…·ä½“äº†ï¼Œå¾ˆå®¹æ˜“å°±åšå®Œäº†ï¼Œè¿™ç§åº”è¯¥æ˜¯æŸä¸€ä¸ªKRé‡Œé¢çš„ä¸€ä¸ªå­é¡¹) SMARTç›®æ ‡æ³• ä¸‹é¢è®°å½•å·©å›ºä¸€ä¸‹å‰äººæ€»ç»“çš„åˆ¶å®šç›®æ ‡çš„SMARTæ³•åˆ™(from è±†åŒ…)ã€‚
Sï¼ˆSpecificï¼‰ï¼šæ˜ç¡®å…·ä½“ ç›®æ ‡å¿…é¡»æ¸…æ™°ã€å…·ä½“ï¼Œé¿å…æ¨¡ç³Šç¬¼ç»Ÿï¼Œæ˜ç¡® â€œåšä»€ä¹ˆã€è°æ¥åšã€æ€ä¹ˆåšâ€ã€‚ åé¢ç¤ºä¾‹ï¼šâ€œæé«˜ä¸šç»©â€ï¼ˆæ¨¡ç³Šï¼Œæœªæ˜ç¡®æé«˜å¤šå°‘ã€é’ˆå¯¹å“ªä¸ªä¸šåŠ¡ï¼‰ã€‚ æ­£é¢ç¤ºä¾‹ï¼šâ€œé”€å”®å›¢é˜Ÿåœ¨ç¬¬ä¸‰å­£åº¦å°†äº§å“ A çš„é”€å”®é¢æå‡ 20%â€ï¼ˆæ˜ç¡®ä¸»ä½“ã€å¯¹è±¡ã€æ—¶é—´ã€æŒ‡æ ‡ï¼‰ã€‚
Mï¼ˆMeasurableï¼‰ï¼šå¯è¡¡é‡ ç›®æ ‡éœ€æœ‰é‡åŒ–æ ‡å‡†ï¼Œä¾¿äºè·Ÿè¸ªè¿›åº¦å’Œåˆ¤æ–­æ˜¯å¦å®Œæˆï¼Œé¿å… â€œå®Œæˆäº†ä½†è¯´ä¸æ¸…å®Œæˆåº¦â€ çš„æƒ…å†µã€‚ åé¢ç¤ºä¾‹ï¼šâ€œæ”¹å–„å®¢æˆ·æ»¡æ„åº¦â€ï¼ˆæ— æ³•é‡åŒ– â€œæ”¹å–„â€ çš„ç¨‹åº¦ï¼‰ã€‚ æ­£é¢ç¤ºä¾‹ï¼šâ€œé€šè¿‡å­£åº¦è°ƒç ”ï¼Œå°†å®¢æˆ·æ»¡æ„åº¦è¯„åˆ†ä» 80 åˆ†æå‡è‡³ 90 åˆ†ä»¥ä¸Šâ€ï¼ˆç”¨å…·ä½“åˆ†æ•°è¡¡é‡ï¼‰ã€‚
Aï¼ˆAchievableï¼‰ï¼šå¯å®ç° ç›®æ ‡éœ€å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œä½†åœ¨ç°æœ‰èµ„æºï¼ˆæ—¶é—´ã€èƒ½åŠ›ã€é¢„ç®—ç­‰ï¼‰ä¸‹å¯è¾¾æˆï¼Œé¿å…å› ç›®æ ‡è¿‡é«˜è€Œå¤±å»åŠ¨åŠ›ï¼Œæˆ–è¿‡ä½è€Œç¼ºä¹æ„ä¹‰ã€‚ åé¢ç¤ºä¾‹ï¼šâ€œé›¶åŸºç¡€ 1 ä¸ªæœˆå†…æˆä¸º AI ä¸“å®¶â€ï¼ˆèµ„æºå’Œæ—¶é—´ä¸åŒ¹é…ï¼Œéš¾ä»¥å®ç°ï¼‰ã€‚ æ­£é¢ç¤ºä¾‹ï¼šâ€œ3 ä¸ªæœˆå†…é€šè¿‡ç³»ç»Ÿå­¦ä¹ ï¼ŒæŒæ¡ Python åŸºç¡€ç¼–ç¨‹å¹¶ç‹¬ç«‹å®Œæˆä¸€ä¸ªæ•°æ®åˆ†æé¡¹ç›®â€ï¼ˆç»“åˆç°æœ‰åŸºç¡€å’Œå­¦ä¹ è·¯å¾„ï¼Œå¯å®ç°ï¼‰ã€‚
Rï¼ˆRelevantï¼‰ï¼šç›¸å…³æ€§ ç›®æ ‡éœ€ä¸ä¸ªäºº / å›¢é˜Ÿçš„æ ¸å¿ƒç›®æ ‡ã€é•¿æœŸæ„¿æ™¯ç›¸å…³è”ï¼Œç¡®ä¿èµ„æºæŠ•å…¥æœ‰ä»·å€¼ï¼Œé¿å…åç¦»æ ¸å¿ƒæ–¹å‘ã€‚ åé¢ç¤ºä¾‹ï¼šâ€œå¸‚åœºéƒ¨èŠ±å¤§é‡æ—¶é—´å­¦ä¹ è´¢åŠ¡è½¯ä»¶â€ï¼ˆä¸å¸‚åœºéƒ¨æ ¸å¿ƒèŒè´£å…³è”åº¦ä½ï¼‰ã€‚ æ­£é¢ç¤ºä¾‹ï¼šâ€œå¸‚åœºéƒ¨å­¦ä¹ æ–°åª’ä½“è¿è¥å·¥å…·ï¼Œæå‡çŸ­è§†é¢‘å†…å®¹æ›å…‰é‡â€ï¼ˆç›´æ¥æœåŠ¡äº â€œæ‰©å¤§å“ç‰Œå½±å“åŠ›â€ çš„æ ¸å¿ƒç›®æ ‡ï¼‰ã€‚
Tï¼ˆTime-boundï¼‰ï¼šæœ‰æ—¶é™ ç›®æ ‡å¿…é¡»è®¾å®šæ˜ç¡®çš„å®Œæˆæ—¶é—´ï¼Œé¿å…æ— é™æœŸæ‹–å»¶ï¼ŒåŒæ—¶ä¾¿äºè§„åˆ’é˜¶æ®µä»»åŠ¡ã€‚ åé¢ç¤ºä¾‹ï¼šâ€œå®Œæˆäº§å“è¿­ä»£â€ï¼ˆæ— æ—¶é—´é™åˆ¶ï¼Œæ˜“å¯¼è‡´è¿›åº¦æ¾æ•£ï¼‰ã€‚ æ­£é¢ç¤ºä¾‹ï¼šâ€œåœ¨ 2024 å¹´ 12 æœˆ 31 æ—¥å‰å®Œæˆ V2.0 ç‰ˆæœ¬çš„åŠŸèƒ½å¼€å‘å¹¶ä¸Šçº¿â€ï¼ˆæ˜ç¡®æˆªæ­¢æ—¶é—´ï¼Œå¯æ‹†åˆ†é˜¶æ®µä»»åŠ¡ï¼‰ã€‚
...</p></div><footer class=entry-footer><span title='2025-08-13 00:00:00 +0000 UTC'>2025-08-13</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2025-08-13&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;73 words</footer><a class=entry-link aria-label="post link to ç›®æ ‡ç®¡ç†æ³•" href=https://duck-dd.github.io/posts/%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86%E6%B3%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>MCMF from scratch</h2></header><div class=entry-content><p>éœ€è¦æ·±åº¦ç”¨åˆ°MCMFäº†ï¼Œä½†æ˜¯æ‘¸äº†æ‘¸è‡ªå·±çš„è„‘é—¨ï¼Œè„‘å­é‡Œæ²¡æœ‰å…¬å¼å’Œæ¼”ç®—ï¼Œåªå‰©å‡ ä¸ªæ¦‚å¿µäº†ã€‚ è®°å½•ä¸€ä¸‹æˆ‘ä»ä½¿ç”¨çš„è§’åº¦ç†è§£MCMFé—®é¢˜(ä¸œæ‹¼è¥¿å‡‘)çš„è¿‡ç¨‹ï¼›æŸäº›å®šç†çš„æ¨å¯¼ï¼Œæˆ–è€…å¤æ‚åº¦çš„è®¡ç®—åŸç†ï¼Œä¸ä¼šæ·±æ‰’ï¼›é¡ºä¾¿è¯´ä¸ªæ„Ÿæ‚Ÿï¼Œåœ¨feedå¦‚æ­¤ä¸°å¯Œçš„ä»Šå¤©ï¼Œæˆ‘ä»¬è¿˜æ˜¯åº”è¯¥æ—¶åˆ»é”»ç‚¼ä¼ ç»Ÿæ‰‹è‰ºï¼Œä¿ç•™ä¿¡æ¯æ£€ç´¢ã€è¿‡æ»¤ã€æ²‰æ·€çš„èƒ½åŠ›ï¼Œå¦åˆ™å¯èƒ½ä¼šè¶Šèµ°è¶Šè¿œ(æŒºç®€å•ä¸ªé—®é¢˜ä¸€å¼€å§‹çœ‹åäº†å¤ªéš¾ç†è§£äº†)ã€‚
MCMFæ¦‚å¿µ Minimum Cost Maximum Flow(æœ€å°è´¹ç”¨æœ€å¤§æµ)ï¼Œæ»¡è¶³æµé‡çº¦æŸå‰æä¸‹ï¼Œæ‰¾åˆ°æºç‚¹åˆ°æ±‡ç‚¹çš„æœ€å¤§æµï¼Œå¹¶ä½¿æ€»è¿è¾“è´¹ç”¨æœ€å°ï¼Œæ•°å­¦æ¨¡å‹å¦‚ä¸‹ï¼š
æœ‰å‘å›¾ G=(V,E)ï¼Œæ¯æ¡è¾¹ e=(u,v) åŒ…å«å®¹é‡ c(e) å’Œå•ä½æµé‡è´¹ç”¨ w(e)ï¼›
æ±‚æºç‚¹ s åˆ°æ±‡ç‚¹ t çš„æœ€å¤§æµï¼Œä¸”æ€»è´¹ç”¨ âˆ‘w(e)â‹…f(e) æœ€å°ï¼Œå…¶ä¸­ f(e) ä¸ºè¾¹ e ä¸Šçš„æµé‡
åœ¨è§£æMCMFä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¸€èµ·äº†è§£ä¸€ä¸‹ä»–çš„å‰èº«ï¼Œæœ€å¤§æµé—®é¢˜å’Œæœ€å°è´¹ç”¨æµé—®é¢˜ã€‚
æœ€å¤§æµé—®é¢˜ æœ€å¤§æµé—®é¢˜æ˜¯ï¼šåœ¨ä¸€ä¸ªæœ‰å‘ç½‘ç»œä¸­ï¼Œæ‰¾åˆ°ä»æºç‚¹ï¼ˆæµé‡çš„èµ·ç‚¹ï¼‰åˆ°æ±‡ç‚¹ï¼ˆæµé‡çš„ç»ˆç‚¹ï¼‰çš„æœ€å¤§å¯è¡Œæµé‡ï¼ŒåŒæ—¶æ»¡è¶³æ¯æ¡è¾¹çš„å®¹é‡é™åˆ¶ï¼›è¯¥é—®é¢˜æ˜¯ä¸Šä¸–çºªäº”åå¹´ä»£æå‡ºçš„ï¼Œæå‡ºåLester Fordå’ŒDelbert Fulkersonå¾ˆå¿«ç»™å‡ºäº†è§£æ³•ï¼Œä¹Ÿæ˜¯æœ€å¤§æµåç»­ä¸€åˆ‡å‘å±•çš„ç†è®ºåŸºç¡€ï¼šFord-Fulkersonç®—æ³•ã€‚
ç¬¬ä¸€å°è±¡ ç®€å•æè¿°ï¼Œæœ‰å‘æœ‰æƒå›¾ï¼Œèµ·ç‚¹sï¼Œç»ˆç‚¹tï¼Œæˆ‘ä»¬è¦å¯»æ‰¾s->tçš„æœ€å¤§çš„æµé‡ã€‚ é‚£ä¹ˆæœ´ç´ çš„ç¬¬ä¸€å°è±¡æ¥çœ‹ï¼Œæš´åŠ›å‘—ï¼ŒBFSæŠŠæ‰€æœ‰s->tè·¯å¾„é›†åˆPå…¨éƒ¨è®°å½•ä¸‹æ¥ï¼Œç„¶åé€æ¡è·¯å¾„éå†Pï¼Œæ¯ä¸€æ¡è·¯å¾„éƒ½è·‘æ»¡(è·¯å¾„ä¸Šæœ€å°å®¹é‡è¾¹)ï¼ŒåŒæ—¶æ›´æ–°æ¶‰åŠçš„è¾¹çš„å®¹é‡å€¼(è¿™é‡Œå¯èƒ½è¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªè¾¹->å‰©ä½™å®¹é‡)ï¼Œç»“æŸåå¾—åˆ°ä¸€ä¸ªæ€»çš„æµé‡å€¼ã€‚ æå‡ºè¿™ä¸ªæ–¹æ¡ˆåï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´å°±ä¼šæœ‰åšç®€å•ä¼˜åŒ–çš„æƒ³æ³•ï¼Œæœ€æœ´ç´ çš„æƒ³æ³•å°±æ˜¯ï¼Œå¯¹äºsçš„æ‰€æœ‰å‡ºè¾¹éƒ½æ»¡ï¼Œæˆ–è€…tçš„æ‰€æœ‰å…¥è¾¹éƒ½æ»¡çš„æƒ…å†µä¸‹ï¼Œæ˜¯å¯ä»¥å¿«é€Ÿé€€å‡ºçš„ï¼›æœ‰äº†å¿«é€Ÿé€€å‡ºè¿™ä¸ªæƒ³æ³•åï¼Œç»§ç»­æ€è€ƒï¼ŒPçš„éå†é¡ºåºæ˜¯å¯¹é€€å‡ºé€Ÿåº¦æœ‰å½±å“çš„ï¼Œåˆå§‹çŠ¶æ€ä¸‹æ‰€æœ‰è¾¹æ²¡æœ‰æ¶ˆè€—ï¼ŒPä¸­çš„æ‰€æœ‰è·¯å¾„æŒ‰å¤§å°æ’åºï¼Œä»å¤§åˆ°å°çš„é¡ºåºæ’åºï¼Œå¤§ç‚¹å¹²æ—©ç‚¹æ•£(æ¯æ¬¡é€‰æ‹©ä¸€æ¡è·¯å¾„å¹¶è®°å½•å¼€é”€åï¼Œä¹Ÿå¯ä»¥å¯¹På‰©ä½™çš„è·¯å¾„é‡æ’åºï¼Œåªä¸è¿‡å¼€é”€æ¯”è¾ƒå¤§)ï¼Œè¿™æ ·æ„Ÿè§‰ä¸Šå¯ä»¥æ›´å¿«ç»“æŸã€‚ å¥½äº†ï¼Œèªæ˜çš„ä½ ï¼Œåœ¨10sä»¥å†…ç»å†äº†ä¸Šè¿°çš„æ€è€ƒè¿‡ç¨‹ï¼Œä½†ä½ çœ‰å¤´ä¸€çš±ï¼Œå‘ç°é—®é¢˜å¹¶ä¸å¦‚æ­¤ç®€å•ï¼Œç®€å•çš„æƒ³æ³•å¹¶ä¸èƒ½ç¡®ä¿èƒ½æ‰¾åˆ°æœ€å¤§æµï¼Œä¾‹å¦‚å¦‚ä¸‹çš„æƒ…å†µï¼š
å›¾1 blocking-flow(é»‘è‰²æ•°å­—=å®¹é‡,çº¢è‰²æ•°å­—=æµé‡) å¦‚å›¾1å·¦(é»‘è‰²æ•°å­—=å®¹é‡,çº¢è‰²æ•°å­—=æµé‡)ï¼Œæµé‡=4åï¼Œæ— æ³•å†æ‰¾åˆ°è·¯å¾„å¯é€šè¿‡æµé‡äº†ï¼Œä½†æ˜¯å¦‚å›¾1å³ï¼Œæœ€å¤§æµå…¶å®æ˜¯5ï¼›è¿™é‡Œå¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼Œé˜»å¡æµï¼Œå³å°†æ‰€æœ‰çš„è·¯å¾„éƒ½é˜»å¡äº†ï¼Œæ— æ³•å†æ–°å¢æµé‡ï¼›æ˜¾è€Œæ˜“è§ï¼Œæœ€å¤§æµæ˜¯é˜»å¡æµï¼Œä½†é˜»å¡æµæœªå¿…æ˜¯æœ€å¤§æµã€‚ ç»“åˆè¿™ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæˆ‘ä»¬åè¿‡æ¥æ€è€ƒä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šé¢ä¸€èµ·æƒ³å‡ºæ¥çš„æœ´ç´ çš„æ–¹æ³•æ— æ³•ç¡®ä¿èƒ½å¤Ÿæ‰¾åˆ°æœ€å¤§æµå‘¢ï¼Ÿæˆ‘ä»¬å°±ç»“åˆè¿™ä¸€ä¸ªå…·ä½“çš„ç®€å•çš„ä¾‹å­æ¥åˆ†æï¼ŒæŠŠæ•´ä¸ªå›¾1å·¦çš„ä¸­é—´éƒ¨åˆ†å®Œå…¨å¿½ç•¥ï¼Œæˆ‘ä»¬åªå…³æ³¨èµ·ç‚¹sä»¥åŠä»–çš„å‡ºè¾¹ï¼Œç»ˆç‚¹tä»¥åŠä»–çš„å…¥è¾¹ï¼Œæˆ‘ä»¬ç¢°åˆ°äº†è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬é€‰å®šäº†sçš„å·¦å‡ºè¾¹ä»¥åŠtçš„å³å…¥è¾¹å¹¶ä¸”æŠŠå®ƒä»¬ä¸¤ä¸ªç»™è·‘æ»¡äº†ï¼Œè€Œsçš„å³å‡ºè¾¹å’Œtçš„å·¦å…¥è¾¹ä»–ä»¬ä¸¤ä¸ªè™½ç„¶è¿˜æœ‰å®¹é‡ä½†æ˜¯å´æ— æ³•äº’è¿(å³æˆ‘ä»¬å¿½ç•¥çš„å›¾çš„ä¸­é—´çš„éƒ¨åˆ†æ²¡åŠæ³•æŠŠå®ƒä»¬è¿æ¥èµ·æ¥)ï¼Œè€Œå›¾1å³ä¸­ï¼Œtçš„å³å…¥è¾¹è·‘æ»¡çš„æµé‡ä¸ä»…ä»…æ¥è‡ªäºsçš„å·¦å‡ºè¾¹ï¼Œè¿˜æœ‰sçš„å³å‡ºè¾¹ï¼›ok, you got it! ç®€å•æ€»ç»“ï¼Œæˆ‘ä»¬çš„æœ´ç´ çš„æš´åŠ›è§£æ³•å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œä¼šå­˜åœ¨ä¸åˆç†çš„è·¯å¾„è§„åˆ’ï¼Œä»–ä¼šæŠŠè‹¥å¹²ä¸ªç“¶é¢ˆè¾¹æ”¾åˆ°ä¸€æ¡è·¯å¾„é‡Œï¼Œå¯¼è‡´å¤šä¸ªç“¶é¢ˆè¢«åŒæ—¶è€—å°½ã€‚å½“ç„¶äº†ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€é€šä¿—çš„ç†è§£ï¼Œæœªå¿…æè¿°çš„æ˜¯å‡†ç¡®çš„ã€‚
é‚£ä¹ˆå¦‚ä½•ä¿®æ­£èƒ½å¤Ÿç¡®ä¿å‡†ç¡®çš„æ‰¾åˆ°æœ€å¤§æµå‘¢ï¼Ÿ
å†ç»§ç»­æš´åŠ›çš„æŠŠPçš„æ‰€æœ‰æ’åºéƒ½è·‘ä¸€éï¼Œå¤æ‚åº¦ä¸å¤ªç°å®(æ„Ÿå…´è¶£å¯ä»¥ç®—ç®—å¤æ‚åº¦) å‰é¢æåˆ°é—®é¢˜åœ¨äºæŸä¸€äº›è·¯å¾„çš„é€‰å–ä¸åˆç†ï¼Œå®ƒå¯èƒ½åŒæ—¶è§¦å‘äº†å¤šä¸ªç“¶é¢ˆ(å®ƒæœ¬å¯ä»¥å°‘è§¦å‘ä¸€äº›ç“¶é¢ˆ) æˆ‘ä»¬é¿å…ä½¿ç”¨åˆ°ä¸åˆç†çš„è·¯å¾„ï¼Ÿé‚£å¯¹è·¯å¾„æ‰“åˆ†ï¼Ÿç»“åˆå®æ—¶çš„ residual graph(æ®‹é‡å›¾ï¼Œä½™é‡å›¾ï¼Œæ®‹é‡ç½‘ç»œ ç­‰)ï¼Œå¯¹å‰©ä½™çš„è·¯å¾„æ‰“åˆ†ï¼Œè·¯å¾„æ¶ˆè€—æ‰çš„è¾¹(æ¶ˆè€—æ‰è¾¹å°±æ˜¯æŒ‡ä¸€æ¡è¾¹è·‘æ»¡)è¶Šå°‘åˆ†è¶Šé«˜ï¼Ÿä¹Ÿä¸åˆç†ï¼Œæ¯ä¸€æ¡è¾¹ä»·å€¼å¹¶ä¸æ˜¯ç›¸ç­‰çš„ï¼Œä¾‹å¦‚è·¨æµ·å¤§æ¡¥ï¼Œè¿™ä¸€æ¡è¾¹ç”šè‡³å°±æ˜¯æ•´ä¸ªå›¾çš„ç“¶é¢ˆï¼›é‚£æˆ‘ä»¬ä»ç‚¹å…¥æ‰‹ï¼Ÿæ¯ä¸ªç‚¹éƒ½æœ‰æµå…¥è¾¹å’Œæµå‡ºè¾¹ï¼Œæµå…¥å’Œæµå‡ºåœ¨æ¯ä¸ªç‚¹æ˜¯ç›¸ç­‰çš„(s té™¤å¤–)ï¼Œæˆ‘ä»¬å°½é‡è®©æ¯ä¸ªç‚¹çš„æµå…¥æµå‡ºæ¯”æ¥è¿‘äºä»–çš„å®¹é‡çš„å…¥å‡ºæ¯”ï¼Œå¹¶å¯¹è·¯å¾„çš„æ‰€æœ‰ç‚¹åšåŠ æƒåä½œä¸ºè¯„åˆ†ï¼Ÿè¯´å®è¯æˆ‘ä¸çŸ¥é“è¿™ä¸ªæƒ³æ³•åˆç†ä¸åˆç†ï¼Œä½†æ˜¯åªè¦æ˜¯æƒ³è¦ä¾èµ–residual graphæ¥å»ºç«‹è¯„åˆ†æœºåˆ¶ï¼Œé‚£ä¹ˆéšç€è¿­ä»£æ¬¡æ•°æå‡ï¼Œæ¯æ¬¡éƒ½è¦æ›´æ–°è¯„åˆ†ï¼Œå¤æ‚åº¦åº”è¯¥éƒ½æ˜¯ä¸å¯æ¥å—çš„ é‚£ä¹ˆæ¢ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬ä¸åœ¨é¿å…ä½¿ç”¨åˆ°ä¸åˆç†è·¯å¾„ä¸Šä¸‹åŠŸå¤«ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åšåˆ°éšæ—¶æ’¤é”€ä¹‹å‰çš„ä¸åˆç†è·¯å¾„ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¤§èƒ†çš„éšä¾¿æï¼Œä¸€è¾¹æä¸€è¾¹ä¿®æ­£ç›´è‡³ç»“æŸï¼›æ­å–œä½ ï¼Œä½ è·ŸLester Fordå’ŒDelbert Fulkersonå¯èƒ½æƒ³åˆ°ä¸€å—å»äº† Ford-Fulkerson ä¸€å¥è¯æè¿°Ford-Fulkersonç®—æ³•ï¼Œå°±æ˜¯åœ¨å»ºç«‹residual graphæ—¶ï¼Œé™¤äº†æ›´æ–°æ¯æ¡è¾¹çš„æ®‹ä½™å®¹é‡ï¼Œè¿˜ä¼šå¯¹å·²ç»äº§ç”Ÿçš„æµé‡å»ºç«‹åå‘è¾¹ï¼Œä¸‹ä¸€è½®è¿­ä»£æ—¶ï¼Œåå‘è¾¹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ ä»ç‰©ç†æ„ä¹‰ä¸Šï¼Œåå‘è¾¹ä¸€å¼€å§‹æ˜¯æ²¡æœ‰çš„ï¼Œå¯¹æ­£å‘è¾¹å¼€é”€åæ‰ä¼šæœ‰åå‘è¾¹(å®¹é‡ç­‰äºæ­£å‘è¾¹çš„å¼€é”€å€¼)ï¼Œè¿™æ²¡æœ‰é—®é¢˜ï¼›åå‘è¾¹äº§ç”Ÿå¼€é”€æ—¶ï¼Œå®é™…æ•ˆæœç±»ä¼¼äºæ°´æµå¯¹å†²ï¼Œæœ¬æ¥æ­£å‘èµ°3ä¸ªæ°´æµï¼Œåå‘å†èµ°ä¸€ä¸ªæ°´æµï¼Œå…¶å®æœ€ç»ˆçš„æ•ˆæœå°±ç­‰äºè¿™æ¡æ°´ç®¡(è¾¹)æ­£å‘èµ°äº†2ä¸ªæ°´æµï¼Œè§£é‡Šçš„é€šï¼Œçœ‹æ¥å¯ä»¥ç†è§£ã€‚ ä½†æ˜¯å›åˆ°ä¸Šé¢æˆ‘ä»¬è‡ªå·±çš„æ€è€ƒï¼Œæˆ‘ä»¬(æˆ–è€…å¯èƒ½åªæ˜¯æˆ‘)æ„šè ¢çš„è„‘è¢‹é‡Œæƒ³çš„æ˜¯è¦å¯¹ä¹‹å‰çš„è·¯å¾„åšæ’¤é”€ï¼Œå½“æˆ‘ä»¬åœ¨æŸä¸€è½®è¿­ä»£ä¸­ä½¿ç”¨åˆ°äº†ä¸€æ¡åå‘è¾¹æ—¶ï¼Œæˆ‘ä»¬ç›¸å½“äºå¯¹æ›¾ç»ä½¿ç”¨åˆ°è¿™æ¡è¾¹çš„æŸä¸€æ¡è·¯å¾„æ’¤é”€äº†ä¸€ä¸ªæµé‡ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ(å¦‚æœæ˜¯è¿™æ ·é‚£å°±ä¸åº”è¯¥ä»…æ˜¯è¿™ä¸€æ¡åå‘è¾¹è¦åšå¼€é”€äº†ï¼Œè€Œæ˜¯åº”è¯¥æ‰¾åˆ°ä¸€æ¡è·¯å¾„) ä¸æ˜¯çš„ï¼Œè¿˜æ˜¯ç”¨å›¾1å·¦ä¸¾ä¾‹ï¼Œä»–çš„residual graphå¦‚ä¸‹ï¼š
å›¾2 å›¾1å·¦éƒ¨çš„residual-graph å›¾2ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ‰¾åˆ°è¿™æ ·ä¸€æ¡è·¯å¾„s->v2->v4->v1->v3->t æµé‡=1ï¼Œå…¶ä¸­v4->v1 æµé‡=1è¿™ä¸€æ®µæ˜¯æˆ‘ä»¬é€‰ä¸­çš„åå‘è¾¹(æˆ‘ä»¬åªå¯¹è¿™ä¸€æ¡è¾¹åšäº†"æ’¤é”€")ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡è¿™ä¸€æ¬¡ä¿®æ­£åï¼Œæˆ‘ä»¬å®é™…çš„è·¯å¾„é€‰æ‹©å°±è·Ÿå›¾1å³çš„æœ€å¤§æµä¸€è‡´äº†ï¼Œçœ¼å‰çš„äº‹å®è¯æ˜Ford-Fulkersonç®—æ³•æ˜¯æ­£ç¡®çš„ã€‚ é‚£æˆ‘ä»¬å°è¯•è§£ç­”ä¸€ä¸‹æˆ‘ä»¬åˆšæ‰äº§ç”Ÿçš„é‚£ä¸ªç–‘æƒ‘ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äº†ä¸€æ¡åå‘è¾¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç©¶ç«Ÿåœ¨åšä»€ä¹ˆ?æˆ‘æ˜¯è¿™æ ·ç†è§£è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨residual graphä¸­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸€æ¡è·¯å¾„ä¸­ä½¿ç”¨åˆ°äº†ä¸€æ¡åå‘è¾¹ï¼Œé‚£ä¹ˆè¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æœ€åˆçš„åŸå›¾ä¸­ï¼Œåˆ†åˆ«å­˜åœ¨sâ€”>tçš„è¿™æ ·ä¸¤æ¡è·¯å¾„ï¼Œåˆ†åˆ«åŒ…å«äº†è¿™æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå›¾æŠ½è±¡æˆä¸€ä¸ªHå‹ï¼Œè¿™æ¡è¾¹å°±æ˜¯ä¸­é—´çš„æ¨ªæ ï¼Œå½“æˆ‘ä»¬å¼€é”€è¿™æ¡è¾¹çš„åå‘è¾¹æ—¶ï¼Œå®é™…æ˜¯åœ¨è°ƒæ•´Hå‹çš„ä¸¤æ¡ç«–çº¿ä¹‹é—´çš„æµé‡åˆ†é…æ–¹å¼(å³åˆç†è§„åˆ’ä½¿ç”¨Hçš„å·¦ä¸Š å·¦ä¸‹ å³ä¸Š å³ä¸‹å››éƒ¨åˆ†)ï¼Œä»¥ä½¿å¾—æ•´ä¸ªHé€šè¿‡çš„æµé‡æœ€å¤§ã€‚
...</p></div><footer class=entry-footer><span title='2025-06-24 00:00:00 +0000 UTC'>2025-06-24</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2025-06-24&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;201 words</footer><a class=entry-link aria-label="post link to MCMF from scratch" href=https://duck-dd.github.io/posts/mcmf/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>The Shortest Path</h2></header><div class=entry-content><p>æœ€çŸ­è·¯å¾„é—®é¢˜ å¯»æ‰¾æœ‰å‘å›¾ä¸­ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œä½¿å¾— è·¯å¾„æœ€çŸ­ æˆ– è·¯å¾„ä¸Šå„è¾¹çš„æƒé‡ä¹‹å’Œæœ€å°
1 æ— æƒå›¾æœ€çŸ­è·¯å¾„ æ‰€æœ‰è¾¹æƒé‡ç›¸åŒï¼Œæœ€çŸ­è·¯å¾„é€€åŒ–ä¸ºå¯»æ‰¾ä¸¤ç‚¹é—´è¾¹æ•°æœ€å°‘çš„è·¯å¾„ï¼ŒBFSæå®šã€‚
2 å•æºæœ€çŸ­è·¯å¾„(SSSP, Single-Source Shortest Paths) 2.1 Dijkstra(å †ä¼˜åŒ–) é™åˆ¶ï¼šè¾¹æƒéè´Ÿ æ€è·¯ï¼šåŸºäºå·²ç»ç¡®å®šçš„æœ€çŸ­è·¯å¾„ï¼Œé€æ­¥è´ªå¿ƒè·å¾—æºç‚¹åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ æ­¥éª¤ åˆå§‹åŒ–ï¼š æºç‚¹sçš„è·ç¦»ä¸º0ï¼Œæºç‚¹sä¸€æ­¥å¯è¾¾çš„èŠ‚ç‚¹è·ç¦»è®°ä¸ºå•è¾¹çš„æƒé‡ï¼Œå…¶ä»–èŠ‚ç‚¹è·ç¦»ä¸ºæ— ç©·å¤§(âˆ) æ‰€æœ‰èŠ‚ç‚¹æ ‡è®°ä¸ºæœªè®¿é—® å¾ªç¯å¤„ç†ï¼š ä»æœªè®¿é—®èŠ‚ç‚¹ä¸­é€‰æ‹©è·ç¦»æœ€å°çš„èŠ‚ç‚¹uï¼Œæ ‡è®°ä¸ºå·²è®¿é—® å¯¹uçš„æ¯ä¸ªé‚»æ¥èŠ‚ç‚¹vï¼Œè¿›è¡Œ æ¾å¼›æ“ä½œ: if distance[v] > distance[u] + weight(u, v): distance[v] = distance[u] + weight(u, v) predecessor[v] = u # è®°å½•è·¯å¾„ ç»ˆæ­¢æ¡ä»¶ï¼šæ‰€æœ‰èŠ‚ç‚¹å‡è¢«è®¿é—®ï¼Œæˆ–æœªè®¿é—®èŠ‚ç‚¹çš„æœ€å°è·ç¦»ä¸º âˆï¼ˆè¡¨ç¤ºæºç‚¹æ— æ³•åˆ°è¾¾å‰©ä½™èŠ‚ç‚¹ï¼‰ ä¼˜åŒ–ï¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—(æœ€å°å †)ç»´æŠ¤æœªè®¿é—®èŠ‚ç‚¹ï¼Œæ¯æ¬¡æå–æœ€å°è·ç¦»èŠ‚ç‚¹çš„æ—¶é—´ä¸ºO(logV) è®°å½•è·¯å¾„ï¼šé€šè¿‡è®°å½•å‰é©±èŠ‚ç‚¹å¯ä»¥å®Œæ•´è¿˜åŸæœ€çŸ­è·¯å¾„ï¼Œè‹¥å­˜åœ¨å¤šæ¡æœ€çŸ­è·¯å¾„(è·ç¦»ç›¸åŒä½†è·¯å¾„ä¸åŒ)ï¼Œä¼šè®°å½•å…¶ä¸­ä¸€æ¡(å…·ä½“å–å†³äºèŠ‚ç‚¹çš„è®¿é—®é¡ºåºï¼Œä¾‹å¦‚å †ä¼˜åŒ–ä¸­ç›¸åŒè·ç¦»èŠ‚ç‚¹çš„å‡ºå †é¡ºåº) ç®—æ³•æ­£ç¡®æ€§ç†è§£ï¼šæœªè®¿é—®èŠ‚ç‚¹ä¸­æ’åºæœ€é å‰çš„(è·ç¦»æœ€å°çš„)èŠ‚ç‚¹ï¼Œæ˜¯åŸºäºæ‰€æœ‰å·²è®¿é—®èŠ‚ç‚¹æ¨ç®—å‡ºæ¥çš„æœ€è¿‘çš„ç‚¹ï¼Œå¦‚æœå†ç»•è¡Œå…¶ä»–èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸€å®šæ¯”å½“å‰è·ç¦»æ›´è¿œï¼›ç›¸åï¼Œå¦‚æœä¸æ˜¯æœªè®¿é—®èŠ‚ç‚¹é‡Œè·ç¦»æœ€å°çš„ç‚¹ï¼Œå¯èƒ½é€šè¿‡å…¶ä»–æœªè®¿é—®èŠ‚ç‚¹ç»•è¡Œæ›´ä¼˜ï¼Œæ‰€ä»¥æ¯æ¬¡è¿­ä»£å¯ä»¥æ ‡è®°è¿™ä¸€ä¸ªç‚¹ 2.2 Bellman-Ford é™åˆ¶ï¼šè¾¹æƒå¯ä»¥ä¸ºè´Ÿï¼Œä½†ä¸èƒ½æœ‰ä»æºç‚¹å¯è¾¾çš„è´Ÿæƒç¯(å¦åˆ™æœ€çŸ­è·¯å¾„æ— æ„ä¹‰ï¼Œé•¿åº¦å¯æ— é™å°) æ€è·¯ï¼šé€šè¿‡ æ¾å¼›æ“ä½œ é€æ­¥é€¼è¿‘ä»æºç‚¹åˆ°æ‰€æœ‰å…¶ä»–é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼›æ¾å¼›æ“ä½œæŒ‡çš„æ˜¯ï¼šå¯¹äºæ¯æ¡è¾¹(u, v)ï¼Œè‹¥ä»æºç‚¹åˆ°uçš„è·ç¦» dist[u]åŠ ä¸Šè¾¹æƒw(u, v)å°äºå½“å‰åˆ°vçš„è·ç¦»dist[v]ï¼Œåˆ™æ›´æ–°dist[v] æ­¥éª¤ åˆå§‹åŒ–ï¼šæºç‚¹è·ç¦»dist[source] = 0ï¼Œå…¶ä»–é¡¶ç‚¹è·ç¦»dist[v] = âˆ å¼›æ“ä½œï¼šå¯¹å›¾ä¸­æ‰€æœ‰è¾¹è¿›è¡Œn-1è½®æ¾å¼›ï¼ˆnä¸ºé¡¶ç‚¹æ•°ï¼‰ï¼›å› ä¸ºæœ€çŸ­è·¯å¾„æœ€å¤šåŒ…å«n-1æ¡è¾¹(å¦åˆ™å­˜åœ¨ç¯ï¼Œè‹¥ä¸ºæ­£æƒç¯å¯å¿½ç•¥ï¼Œè´Ÿæƒç¯åˆ™æ— æ³•æ±‚è§£) æ£€æµ‹è´Ÿæƒç¯ï¼šç¬¬næ¬¡æ¾å¼›æ—¶ï¼Œè‹¥ä»èƒ½æ›´æ–°è·ç¦»ï¼Œåˆ™è¯´æ˜å­˜åœ¨ä»æºç‚¹å¯è¾¾çš„è´Ÿæƒç¯ ä¼˜åŒ–ï¼šä¸‹é¢çš„SPFA ç®—æ³•æ­£ç¡®æ€§ç†è§£ï¼šnä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆèµ·ç‚¹åˆ°ç»ˆç‚¹è·¯å¾„æœ€é•¿å°±æ˜¯ 1->2->3->...->n æœ€å¤šæœ‰n-1è·³(è¾¹)ï¼Œå¦åˆ™çš„è¯å°±æ˜¯æœ‰ç¯äº†(å¦‚æœæ˜¯æ­£ç¯ï¼Œç»•è¡Œæ˜¯æ›´å·®çš„è§£ï¼Œå¦‚æœæ˜¯è´Ÿç¯ï¼Œæœ€çŸ­è·¯å¾„æ— è§£)ï¼Œç®—æ³•è¿­ä»£xè½®ï¼Œé‚£ä¹ˆxè·³èƒ½åˆ°è¾¾çš„èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„éƒ½ä¼šè¢«ä¼˜åŒ–å®Œæˆï¼Œæ‰€ä»¥ç»è¿‡n-1è½®è¿­ä»£ï¼Œæœ€é•¿çš„è·¯å¾„ä¹Ÿèƒ½è¢«ä¼˜åŒ–å®Œæˆäº†ï¼›å¦‚ä½•ç†è§£è¿™å¥è¯å‘¢ï¼Œå‡è®¾ä¸€ä¸ªç‚¹è·ç¦»èµ·ç‚¹æœ‰1æ¡è¾¹å’Œ3æ¡è¾¹ä¸¤æ¡è·¯å¾„ï¼Œé‚£ä¹ˆç»è¿‡ä¸‰è½®è¿­ä»£ï¼Œè¿™ä¸¤æ¡è·¯å¾„ä¹‹é—´ä¸€å®šä¼šåšPKï¼Œæ‹©ä¼˜å°±ä¼šå®Œæˆ 2.3 SPFA, Shortest Path Faster Algorithm SPFAå…¶å®åªæ˜¯Bellman-Fordçš„ç­›é€‰ä¼˜åŒ–ï¼Œæœ¬è´¨ç›¸åŒ
...</p></div><footer class=entry-footer><span title='2025-06-23 00:00:00 +0000 UTC'>2025-06-23</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2025-06-23&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;267 words</footer><a class=entry-link aria-label="post link to The Shortest Path" href=https://duck-dd.github.io/posts/shortest-path/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Golang Tips</h2></header><div class=entry-content><p>è¯´æ˜ï¼š
æŒç»­æ›´æ–°(æ ‡é¢˜å«TODOå…³é”®å­—çš„å°èŠ‚ï¼Œéƒ½ä¼šä»¥topicå¼€å§‹ï¼Œåç»­ä¼šæŒç»­å®Œå–„topic)ã€‚è®°å½•å†…å®¹æ˜¯ä¸€äº›å¯¹æˆ‘è€Œè¨€ï¼š
å°çš„éªšæ“ä½œ(å¯èƒ½æœ‰äº›tricky) å®¹æ˜“ç†è§£åå·®çš„ç‚¹ å†·é—¨çš„ç‚¹(æ²¡å•¥ç”¨çš„ç‚¹) Golangä»£ç æ‰§è¡Œé¡ºåº æ²¡æœ‰å¹¶å‘ï¼Œä¸€ä¸ªé¡ºåºé€»è¾‘ï¼ŒCPUçœŸæ­£æ‰§è¡ŒæŒ‡ä»¤ä¸ä¸€å®šä¸ç¼–ç é¡ºåºå®Œå…¨ä¸€è‡´ï¼ŒGoçš„ç¼–è¯‘å™¨ä¼šåšä¼˜åŒ–ï¼Œå‰ææ˜¯ä¼šè§£å†³ä¾èµ–é€»è¾‘ï¼Œçœ‹èµ·æ¥æ˜¯â€œé¡ºåºæ‰§è¡Œâ€è¿™ä¸€å‡è®¾ã€‚
äº†è§£æ›´å¤šå¯æŸ¥çœ‹Golangå†…å­˜æ¨¡å‹è§„èŒƒã€‚
internalåŒ… internalåŒ…ï¼Œåªèƒ½è¢«å’Œinternalç›®å½•æœ‰åŒä¸€ä¸ªçˆ¶ç›®å½•çš„åŒ…æ‰€å¯¼å…¥ã€‚ ä¾‹å¦‚ï¼Œnet/http/internal/chunkedå†…éƒ¨åŒ…åªèƒ½è¢«net/http/httputilæˆ–net/httpåŒ…å¯¼å…¥ï¼Œä½†æ˜¯ä¸èƒ½è¢«net/urlåŒ…å¯¼å…¥ã€‚ä¸è¿‡net/urlåŒ…å´å¯ä»¥å¯¼å…¥net/http/httputilåŒ…ã€‚
å˜é‡äº¤æ¢ i, j = j, i // äº¤æ¢ i å’Œ j çš„å€¼ forå¾ªç¯æœ‰å…¶ä»–è¯†åˆ«breakçš„å…³é”®å­— forå¾ªç¯å†…æœ‰å…¶ä»–è¯†åˆ«breakçš„å…³é”®å­—æ—¶ï¼Œå…¶ä»–å…³é”®å­—å†…çš„breakä¼šè¢«å…¶è¯†åˆ«è€Œä¸ä¼šè·³å‡ºforï¼Œä»¥ä¸‹ç”¨selectä¸¾ä¾‹ï¼ŒswitchåŒç†ã€‚
for { select { case &lt;-sigChan: // exit for break default: // do something } } ä»¥ä¸Šbreakå¹¶ä¸èƒ½é€€å‡ºforå¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾æˆ–gotoè§£å†³ï¼š
// 1 æ ‡ç­¾ FOR: for { select { case &lt;-sigChan: // exit for break FOR default: // do something } } ---------------------------- // 2 goto for { select { case &lt;-sigChan: // exit for goto ENDFOR default: // do something } } ENDFOR: è¯»å–stdin(åˆ·é¢˜åˆ«å†å› ä¸ºstdinè¸©å‘äº†å–‚) fmtåŒ…å†… Scanç³»åˆ— SScanç³»åˆ— Fscanç³»åˆ—å¦‚ä¸‹ï¼š
...</p></div><footer class=entry-footer><span title='2025-06-22 00:00:00 +0000 UTC'>2025-06-22</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2021-07-01&nbsp;Â·&nbsp;21 min&nbsp;Â·&nbsp;4386 words</footer><a class=entry-link aria-label="post link to Golang Tips" href=https://duck-dd.github.io/posts/go-tips/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è£…ä¿®é‚£äº›äº‹å„¿</h2></header><div class=entry-content><p>è¿™ä¸ªè¡Œä¸šï¼Œæ˜¯ä¸€ä¸ªæ²¡æœ‰ç›‘ç®¡ï¼Œæ²¡æœ‰è¡Œä¸šæ ‡å‡†(æœ‰çš„å¤§éƒ¨åˆ†ä¹Ÿæ˜¯æ‰¯æ·¡)ï¼Œç¾¤é­”ä¹±èˆçš„è¡Œä¸šï¼Œè¿™è¡Œä¸šäººçš„è¯ï¼Œä¸è¦ç›¸ä¿¡ï¼Œä¸è¦ç›¸ä¿¡ï¼Œä¸è¦ç›¸ä¿¡
ä»æˆ‘è‡ªèº«ç»å†æ¥è¯´ï¼Œè¿™ä»¶äº‹çœŸçš„ä¸å¤æ‚ï¼Œå®Œå…¨ä¸å€¼ä»–ç°åœ¨çš„ä»·é’±ï¼›ä¸€å¼€å§‹è¿™ä»¶äº‹å¾ˆç¥ç§˜ï¼Œä½ è§‰å¾—ä»˜å¤šå°‘é’±éƒ½æ˜¯åˆç†çš„ï¼Œä½†çœŸä¸æ˜¯è¿™æ ·ï¼Œåˆ°å¤„éƒ½æ˜¯éª—é’±çš„ï¼›æ‰€ä»¥è£…ä¿®å¼€å§‹å‰çœŸæ­£çš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯ä½ è¦äº†è§£ä¸€ä¸‹èƒŒæ™¯è¯„ä¼°ä¸€ä¸‹å·¥ä½œé‡ï¼Œæ”¾å¿ƒå¤§èƒ†çš„å»ç ä»·å§
æœ¬æ–‡ä»è‡ªå·±çš„äº²èº«ç»å†å‡ºå‘æ¥åˆ†æä¸€ä¸‹è£…ä¿®è¿™ä»¶ä»¤äººå¤´ç–¼çš„äº‹æƒ…ï¼Œæ²¡æœ‰å±•å¼€å¤ªå¤šçš„ç»†èŠ‚ï¼Œåªä»¥å„ä¸ªé˜¶æ®µçš„å…¸å‹é€‰æ‹©é¢˜ä¸ºåˆ‡å…¥ç‚¹ï¼Œæ¬¢è¿æŒ‡æ­£å’Œäº¤æµï¼Œé¢„ç¥ä½ è·å¾—ä½ çš„æ¢¦ä¸­æƒ…å±‹ï½
å…¨åŒ… or åŠåŒ… å¦‚æœä½ åˆšå¼€å§‹è€ƒè™‘è£…ä¿®ï¼Œé‚£ä½ ä¸€å®šæ˜¯ç‰¹åˆ«å¼€å¿ƒå’Œå…´å¥‹çš„ã€‚ä½ é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜å¤§æ¦‚å°±æ˜¯ï¼Œâ€œåŠåŒ…â€ or â€œå…¨åŒ…â€ï¼ˆè‡ªå·±æ‰¾å·¥äººçš„æ–¹å¼ï¼Œä¸å¤ªäº†è§£å°±ä¸è°ˆäº†ï¼‰ï¼›å¾ˆå¤šå£°éŸ³ä¼šå‘Šè¯‰ä½ è¯´ï¼Œå…¨åŒ…è¿™ç§å®Œå…¨é»‘ç›’çš„è¡Œä¸ºä¼šæœ‰å¤ªå¤šå‘äº†ï¼Œç»™ä½ ç”¨çš„ä¸œè¥¿éƒ½æ˜¯å·®çš„balabala ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³çœå¿ƒï¼Œæˆ–è€…åœ¨è£…ä¿®çš„è¿™å‡ ä¸ªæœˆé‡Œä½ æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´ç²¾åŠ›èƒ½å¤ŸæŠ•å…¥è¿›è¿™ä»¶äº‹ï¼Œé‚£ä¹ˆè¿˜æ˜¯å»ºè®®ä½ å’¬å’¬ç‰™å¿½ç•¥è¿™äº›æœ‰ä¸€ä¸¢ä¸¢å±è¨€è€¸å¬çš„è¯´æ³•ï¼Œæœæ–­çš„é€‰æ‹©å…¨åŒ…ï¼›å¦‚æœä½ é€‰æ‹©äº†å…¨åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹æœ€ç»ˆæ•ˆæœçš„ç¡®è®¤æ— éé ä¸¤ä¸ªå…³é”®æŒ‡æ ‡
1 æ˜¯ä¸æ˜¯æˆ‘æƒ³è¦çš„æ ·å­ 2 æ˜¯ä¸æ˜¯ç¯ä¿ ä¸ºäº†ç¬¬ä¸€ç‚¹ï¼Œä½ éœ€è¦æŸ¥çœ‹ç´ æåº“ç¡®è®¤å¥½è‡ªå·±å–œæ¬¢çš„æ ·å­ï¼Œè·Ÿè®¾è®¡å¸ˆåšå……åˆ†çš„æ²Ÿé€šï¼Œå¹¶åœ¨æ–½å·¥è¿‡ç¨‹çš„å…³é”®èŠ‚ç‚¹çº¦è®¾è®¡å¸ˆä¸€èµ·å»ç°åœºåšé˜¶æ®µæ€§çš„æ²Ÿé€šå’Œdouble checkï¼Œå› ä¸ºçœå¿ƒï¼Œæ‰€ä»¥ä½ åšçš„åŠŸè¯¾å¯èƒ½ä¸å¤šï¼Œå…¶å®è¿™æ¯”è¾ƒä¾èµ–è®¾è®¡å¸ˆçš„ä¸“ä¸šæ€§ ä¸ºäº†ç¬¬äºŒç‚¹ï¼Œä½ éœ€è¦åšçš„åŠŸè¯¾æ˜¯ï¼ŒæŸ¥ä¸€æŸ¥è£…ä¿®è¿‡ç¨‹ä¸­å“ªäº›ä½¿ç”¨åˆ°çš„ææ–™å¯èƒ½ä¼šä¸ç¯ä¿ï¼Œç„¶åç›´æ¥åœ¨åˆåŒé‡Œå£°æ˜å¥½è¿™äº›ææ–™å…·ä½“ä½¿ç”¨å“ªäº›å“ç‰Œçš„å“ªäº›å‹å·ï¼Œå¹¶åœ¨è¿™äº›ææ–™å…¥åœºæ—¶åšå¥½æ£€æŸ¥(å…¶å®å¯ä»¥æ‰¾ç±»ä¼¼"ç›‘å·¥"çš„è§’è‰²æ¥å¸®åŠ©ä½ æ‰§è¡Œï¼Œåº”è¯¥æ€»æ¯”ä½ å®Œå…¨ä¸å»ç°åœºè¦å¥½)
æœ‹å‹ï¼Œå¦‚æœä½ é€‰æ‹©äº†åŠåŒ…ï¼Œé‚£ä½ æ˜¯çœŸçš„å‹‡å£«ï¼Œå¯¹ä½ è¡¨ç¤ºæ•¬ä½©ï¼Œä»¥ä¸‹çš„è®¨è®ºå’±ä»¬å°±é»˜è®¤ä½ å·²ç»åšäº†å¤§é‡çš„èƒŒæ™¯&åŠŸè¯¾çš„å­¦ä¹ ã€‚
å…¥æˆ·é—¨ æ¢ï¼ä½ 99%ä¸å–œæ¬¢å¼€å‘å•†çš„è¿™ä¸ªï¼Œç›¸æ¯”æ¢é”ï¼Œå°±å¹²è„†ç›´æ¥æ¢é—¨å§
çª—æˆ· å¦‚æœå…è®¸ï¼Œæ¢ï¼æ‹‰æ»¡é…(å¯èƒ½å¾ˆå¤šåœ°æ–¹æ”¿ç­–ä¸å…è®¸åŠ¨å¤–ç«‹é¢ï¼Œé‚£å°±æ²¡åŠæ³•äº†)
éš”éŸ³ å¦‚æœä½ å¯¹å£°éŸ³è¦æ±‚å¾ˆé«˜ï¼Œè€ƒè™‘åšå…¨å±‹éŸ³å“ï¼Œé‚£æ˜¯è‚¯å®šå¾—åšäº† å¦‚æœä½ æ²¡æœ‰è€ƒè™‘åšå…¨å±‹éŸ³å“ï¼Œé‚£ä¹ˆæˆ‘è¿˜æ˜¯å¼ºï¼çƒˆï¼å»ºï¼è®®ï¼åšéš”éŸ³ï¼
å…¨å±‹å®šåˆ¶ or æˆå“å®¶å…· ä¸ªäººè§‚ç‚¹ï¼Œå…¨å±‹å®šåˆ¶çœŸçš„ä¸å’‹åœ°ï¼Œå»ºè®®ç¥›é­…ï¼Œè®¤çœŸçš„å»é€›ä¸€é€›æˆå“å®¶å…·å¸‚åœºï¼› è¿˜å¾€ä¸‹çœ‹ï¼Œä½ æœç„¶è¿˜æ˜¯è·Ÿæˆ‘ä¸€æ ·ï¼Œå¤´é“çš„é€‰æ‹©äº†å…¨å±‹å®šåˆ¶ï¼Œé‚£è¿™ä¸ªå­æ–¹å‘å‘ä¸ªåƒå…«ç™¾ä¸ªè®ºæ–‡æ„Ÿè§‰éƒ½æ³›ä¸èµ·ä¸€ç‚¹æ°´èŠ±ï¼› å•†å®¶è´©å–çš„ç„¦è™‘ç‚¹ï¼šç”²é†›ï¼Œè‹¯ç³»åŒ–åˆç‰©ï¼›ä½ è¦æƒ³æ­»ç£•ï¼Œå¾—å…ˆå­¦åŒ–å­¦ï¼› æ ‡å‡†ï¼šå›½å¤–å›½å†…å¤ªå¤šæ ‡å‡†ï¼Œä½†æœ‰ä¸€ç‚¹ä¸ªäººè§‰å¾—æœ‰å‚è€ƒæ„ä¹‰ï¼Œå°±æ˜¯ æŠ½æ£€ & é€æ£€ ï¼› å“ç‰Œé€‰æ‹©ï¼šå¤§å•†åœºå¤§å“ç‰Œçš„å“ç‰Œæº¢ä»·ç¡®å®å¤ªé«˜äº†ï¼Œè€Œä¸”ä¹Ÿç¡®å®ä»£åŠ å·¥ï¼Œæ‰€ä»¥æœ‰åˆ¤æ–­èƒ½åŠ›é‚£å°±æœæ–­ç›´æ¥æ‰¾å·¥å‚å§ï¼› ç»†èŠ‚ä¸å±•å¼€è®²äº†ï¼Œè¯´ä¸€ç‚¹æ³¨æ„ç‚¹ï¼Œè·Ÿç”µä½/ç®¡é“åšé…åˆè¦æå‰åšè§„åˆ’ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŠŠè¿™ä¸ªé—®é¢˜æ”¾å¾—è¿™ä¹ˆé å‰
å¸ƒå±€ è¯¥ç ¸å°±ç ¸åˆ«çŠ¹è±«(éæ‰¿é‡) æ–°ç Œå¢™æ—¶è€ƒè™‘å¥½ç”¨é€”ï¼Œå¦‚æœæœ‰æ‰¿é‡éœ€æ±‚(ä¾‹å¦‚æŒ‚ç”µè§† æŒ‚æŸœå­ç­‰)ï¼Œè€ƒè™‘å¥½å¢™ä½“çš„ææ–™ ç Œå¢™åå¤šæ™¾ä¸€æ™¾ å¦åˆ™åæœŸå¢™ä¸Šé¢æå¾—ä»»ä½•ä¸œè¥¿éƒ½å®¹æ˜“å‰¥ç¦» å¢™çš„å¹³çš„é—®é¢˜ï¼Œä»å°ç™½è§†è§’æ¥çœ‹ï¼Œå°±æ˜¯è¡¨é¢æ˜¯å¹³é¢ï¼Œå¹¶ä¸”è¿™ä¸ªå¹³é¢è·Ÿå…¶ä»–å¹³é¢çš„è§’åº¦(ä¸€èˆ¬90åº¦)æ˜¯æ­£å¸¸çš„ï¼Œè¿™ç‚¹ä¸ç®¡æ–½å·¥æ–¹æ˜¯å†²ç­‹ å‚å¹³è¿˜æ˜¯å•¥æ–¹æ³•ï¼Œæ€»ä¹‹å…ˆè®²æ¸…æ¥šè¦æ±‚å¹¶è®©ä»–ä»¬ä¸¥æ ¼æ‰§è¡Œ åä¾¿orè¹²ä¾¿ï¼Ÿå¤šä¸ªå«ç”Ÿé—´å¯ä»¥è€ƒè™‘ç•™ä¸€ä¸ªè¹²ä¾¿ï¼Œä¸ä»…å¥åº·ï¼Œè€Œä¸”åæœŸå°å­©ä½¿ç”¨ä¹Ÿæ–¹ä¾¿ï¼Œæˆ–è€…ä¸Šé¢å†æ”¾å°é©¬æ¡¶ä¹Ÿå¥½æ‰©å±•ï¼ˆè¿™ä¸ªé—®é¢˜éœ€è¦æå‰è€ƒè™‘å› ä¸ºå¯èƒ½å½±å“å«ç”Ÿé—´åœ°é¢é«˜åº¦å¸ƒå±€ï¼‰
æ°´ç”µ æ°´ç®¡çº¿ç®¡ä¸€å®šé€‰æ‹©æœ€å¥½çš„å“ç‰Œçš„å¥½çš„å‹å·ï¼Œé¿å…åæœŸå‡ºé—®é¢˜å¤ªéº»çƒ¦ è‡³äºæ˜¯æŒ‰ä½¿ç”¨é•¿åº¦ç®—ï¼Œè¿˜æ˜¯ä¸€å£ä»·æ¨¡å¼ï¼Œè‡ªå·±æ¥è¡¡é‡å¯¹æ¯”ï¼Œæ˜¯å¦ç‚¹å¯¹ç‚¹èµ°çº¿ï¼Ÿå¯ä»¥çœ‹ç½‘ä¸Šå¤§é‡çš„åˆ†æ ç”µç®±ä½ç½®æŒªä¸æŒªï¼Ÿå¦‚æœé£æ°´é—®é¢˜(é‚£ä¹ˆä½ ä¸€å®šæ˜¯ç›¸ä¿¡è¿™ä¸ªçš„)ï¼ŒæŒªï¼›å¦‚æœåªæ˜¯ä¸ºäº†å¥½çœ‹ï¼Œé‚£åæœŸæŒºå¤šæ–¹æ³•å¼„å¥½çœ‹ï¼Œå¯ä»¥çœ‹çœ‹æ•ˆæœè‡ªå·±èƒ½ä¸èƒ½æ¥å— å‰ç½®è¿‡æ»¤å™¨ï¼šç©ºé—´å…è®¸ï¼Œå°±å®‰ï¼›æ‹‰æ»¡é…ï¼Œæœ¬èº«æ²¡å¤šè´µï¼Œå½±å“æ°´å‹å°±ä¸å¥½äº† å…¨å±‹è½¯æ°´ï¼šæ²¡è€ƒè™‘æ¸…æ¥šï¼Œå°±åš ä¸‹æ°´ï¼šæœ‰é¡¾è™‘è¯¥åšçš„ä½ç½®å°±åšï¼Œç”¨ä¸ç”¨å¾—ä¸Šå†è¯´ ç”µä½ï¼šæœ‰é¡¾è™‘å°±åšï¼Œæ€»æ¯”åæœŸæ‹‰æ’çº¿æ¿å¼º(70ä¸ª/100å¹³ ï¼Ÿ) å¼€å…³ï¼šä¸€å¼€å¤šæ§åˆ«é¡¾è™‘ï¼Œæƒ³åšå°±åšï¼Œæ–¹ä¾¿ç”Ÿæ´» å…¨å±‹æ™ºèƒ½ï¼šå·²ç»åœ¨è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†ï¼Ÿé‚£å°±åšã€‚ã€‚ã€‚æœ‰ç‚¹è´µï¼Œè€ƒè™‘å¥½æ€§ä»·æ¯”å§ï¼Œåº”äº†é‚£å¥è¯ï¼Œè´µçš„ä¸œè¥¿ï¼Œé™¤äº†è´µï¼Œæ²¡æœ‰å…¶ä»–çš„æ¯›ç—…ï¼›è¿™é‡Œä¸å±•å¼€è®²äº†ï¼Œå¤ªå¤æ‚äº†ï¼Œå®Œå…¨å¯ä»¥å•å¼€ä¸€é¡µçš„ä¸œè¥¿ï¼›PS:ä»åˆä¸­ç‰©ç†æ¥åˆ†æå…¨å±‹æ™ºèƒ½ï¼Œæ—¢ç„¶æœ‰æ™ºèƒ½æ§åˆ¶å¼€å…³ï¼Œè€Œè¿™ä¸ªå¼€å…³æœ¬èº«ä¹Ÿæ˜¯éœ€è¦ä¾›ç”µçš„ï¼Œé‚£ä¹ˆå¦‚æœæŠŠå¼€å…³ä¸²è”åˆ°ç”µè·¯é‡Œï¼Œä»–å°±ä¸æ˜¯yes or noçš„å¼€å…³ï¼Œå…³é—­çŠ¶æ€æœ¬èº«æ˜¯ä¸€ä¸ªå¤§ç”µé˜»ï¼Œä¹Ÿå°±æ˜¯è¿˜æ˜¯æœ‰å¾®å¼±çš„ç”µæµé€šè¿‡ç”µè·¯ï¼Œè¿™ä¸€å®šæ˜¯ä¸å¥½çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯é¢„ç•™å¥½æ§åˆ¶è·¯çš„é›¶çº¿å§
æœ‰ä¸¤ä¸ªå®¹æ˜“å¿½ç•¥çš„ç‚¹
1 å¢™é¢ä¸èƒ½å¼€é•¿çš„æ¨ªæ§½(è„‘è¡¥ä¸€ä¸‹è¿™ç¡®å®ä¼šå½±å“å¢™çš„ç¨³å®šæ€§) 2 å¼ºå¼±ç”µç£åœºå¹²æ‰°é—®é¢˜ï¼Œç‰©ç†å·²ç»è¿˜ç»™è€å¸ˆäº†ï¼Œä½†æ˜¯é¿å…å¹²æ‰°è¿™ä¸ªè¦ä¿æŒè·ç¦»è¿˜æ˜¯ç¬¦åˆå¸¸è¯†çš„ æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥æœ¨ç“¦æ²¹ç¯èŠ‚
å…¨å±‹åŠé¡¶ or éƒ¨åˆ†åŠé¡¶ å¦‚æœè€ƒè™‘åšæ— ä¸»ç¯ï¼Œé‚£ä¹ˆè‚¯å®šå…¨å±‹åŠé¡¶ å¦‚æœå¯¹å±‚é«˜æœ‰è¦æ±‚ï¼Œé‚£ä¹ˆå°±åˆ«åŠé¡¶ å¦‚æœçŠ¹è±«ï¼Œé‚£ä¹ˆå°±åˆ«åš(æˆ‘è®¤ä¸ºå…¨éƒ¨åŠé¡¶çš„ç›®çš„å°±æ˜¯åšå…‰çº¿çš„è§„åˆ’ï¼ŒçŠ¹è±«çš„è¯è¯´æ˜æ²¡æœ‰è¦æ±‚æˆ–è§„åˆ’ï¼Œé‚£å°±åˆ«åšç®—äº†)
...</p></div><footer class=entry-footer><span title='2023-06-24 00:00:00 +0000 UTC'>2023-06-24</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2023-06-24&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;134 words</footer><a class=entry-link aria-label="post link to è£…ä¿®é‚£äº›äº‹å„¿" href=https://duck-dd.github.io/posts/decoration/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™</h2></header><div class=entry-content><p>æ¯æ¬¡æ¥æ‰‹ä¸€äº›è€æ—§ç³»ç»Ÿï¼Œæ€»æ˜¯å¾ˆå¤´ç–¼ï¼Œæœ€è¿‘æƒ³ï¼Œä¼šä¸ä¼šåˆ«äººæ¥æ‰‹äº†æˆ‘çš„ç³»ç»Ÿä»¥åä¹Ÿæ˜¯ä¸€æ ·çš„æ„Ÿå—ï¼Œæƒ³åˆ°å¯èƒ½æœ‰äººæ¯å¤©éƒ½åœ¨åæ§½(éª‚)æˆ‘å¤´çš®å‘éº»å•Šâ€¦
çŸ¥æ˜“è¡Œéš¾ï¼Œå…¶å®æ€ä¹ˆåšå¥½ä¸€ä¸ªåç«¯æœåŠ¡å¤§å®¶éƒ½æ˜¯é—¨æ¸…çš„ï¼Œåªæ˜¯å—é™äº æ’æœŸ ä¸šåŠ¡ä»·å€¼ åä½œ ç­‰å¤ªå¤šå› ç´ ï¼Œå¾€å¾€äº‹ä¸æ„¿è¿ã€‚åªèƒ½è¯´ä½†è¡Œå¥½äº‹è«é—®å‰ç¨‹å§ï¼Œä¸‹é¢å†æŠŠè¿™äº›åŸåˆ™åˆ—ä¸€ä¸‹ï¼Œæ—¶åˆ»æé†’è‡ªå·±å§ï¼›ä»¥ä¸‹åŸåˆ™ä»ä¸ªäººè§’åº¦åˆ†å…ˆåï¼Œä¸æ˜¯è¯´æœ‰é‡è¦æ€§åŒºåˆ«ï¼Œè€Œæ˜¯æœ‰äº›åŸåˆ™å¾ˆé«˜é¢‘ï¼Œæˆ–è€…å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œéœ€è¦æ—¶åˆ»ç‰¢è®°ã€‚
ä¸€ èŒè´£/é€»è¾‘ æ¸…æ™° å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle, SRPï¼‰ æ¯ä¸ªå•å…ƒåªè´Ÿè´£ä¸€ä»¶äº‹ã€‚ ä»æ€»ä½“æ¶æ„ä¸Šè®²ï¼Œè¿™ä¸ªå•å…ƒæ˜¯ä¸€ä¸ªå­ç³»ç»Ÿï¼Œä¾‹å¦‚è®¢å•ç³»ç»Ÿï¼Œæ—¥å¿—ç³»ç»Ÿï¼›ä»ç³»ç»Ÿæ¶æ„ä¸Šè®²ï¼Œè¿™ä¸ªå•å…ƒæ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œä¾‹å¦‚æ–‡ç« ç®¡ç†æ¨¡å—ï¼Œè¯„è®ºç®¡ç†æ¨¡å—ç­‰ï¼›ä»ä»£ç æ¨¡å—å†…éƒ¨è®²ï¼Œè¿™ä¸ªå•å…ƒæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªç±»ï¼Œä¸€ä¸ªstructç­‰ã€‚å†å¾€ä¸‹çœ‹ï¼Œä¸€ä¸ªç±»è¿˜æœ‰Nå¤šä¸ªæ–¹æ³•â€¦ å°±åƒåˆ†å­ï¼ŒåŸå­ï¼Œè´¨å­/ç”µå­ï¼Œå¤¸å…‹â€¦ä»å®è§‚åˆ°å¾®è§‚çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æˆ‘ä»¬æŠŠä¸€å¥—å¤æ‚çš„ç³»ç»Ÿä¸€ç‚¹ä¸€ç‚¹æ‹†è§£å¼€çš„è¿‡ç¨‹ï¼Œè€Œæ¯æ¬¡å‘ä¸‹æ‹†è§£ä¸€å±‚çš„æ—¶å€™ï¼Œè¿™ä¸€å±‚çš„ä¸ªä½“ï¼Œå°½é‡åšåˆ°æ¯ä¸ªéƒ½è´Ÿè´£ä¸€ä»¶äº‹
è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeter, LoDï¼‰ ä¸€ä¸ªæ¨¡å—åº”å°½å¯èƒ½å°‘åœ°äº†è§£å…¶ä»–æ¨¡å—çš„å†…éƒ¨ç»†èŠ‚ã€‚ åè¿‡æ¥çœ‹ï¼Œä¸€ä¸ªæ¨¡å—å‘å¤–ä¸æš´éœ²ç»†èŠ‚ï¼Œåˆ«äººå°±æ²¡æ³•äº†è§£ç»†èŠ‚äº†ï¼›æ‰€ä»¥è¿˜æ˜¯åœ¨è®²æ§åˆ¶è€¦åˆã€‚
é«˜å†…èšï¼Œä½è€¦åˆï¼ˆHigh Cohesion, Low Couplingï¼‰ æ¨¡å—å†…éƒ¨çš„åŠŸèƒ½ç´§å¯†ç›¸å…³(é«˜å†…èš)ï¼Œæ¨¡å—é—´é€šè¿‡æ˜ç¡®æ¥å£äº¤äº’ï¼Œä¾èµ–å…³ç³»ç®€å•(ä½è€¦åˆ)ã€‚ æ˜ç‰Œäº†ï¼Œç›´æ¥å†æé†’ä½ ä¸€ä¸‹ï¼Œæ§åˆ¶è€¦åˆæ§åˆ¶è€¦åˆæ§åˆ¶è€¦åˆâ€¦
æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principle, ISPï¼‰ å®¢æˆ·ç«¯ä¸åº”è¢«è¿«ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œåº”å°†å¤§æ¥å£æ‹†åˆ†ä¸ºå¤šä¸ªä¸“ç”¨å°æ¥å£ã€‚ è¿™é‡Œä¸æ˜¯å¯¹ä½¿ç”¨è€…çš„è¦æ±‚ï¼Œè€Œæ˜¯å¯¹æ¥å£æä¾›(è®¾è®¡)è€…æå‡ºè¦æ±‚ï¼Œåœ¨è®¾è®¡å¯¹å¤–æš´éœ²æ¥å£æ—¶ï¼Œè¦å°½å¯èƒ½å°ï¼Œå•ä¸€ï¼Œç‹¬ç«‹ï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥æ›´çµæ´»ã€‚ å¯¹å¤–æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯å†…éƒ¨æ¥å£ï¼Œè¯´å®è¯æˆ‘åšä¸åˆ°å°½å¯èƒ½å°ã€‚
äºŒ ç ´åæ€§(ä¾µå…¥æ€§)æ§åˆ¶ å¼€é—­åŸåˆ™ï¼ˆOpen-Closed Principle, OCPï¼‰ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ ä»æˆ‘çš„ç†è§£ï¼Œè¿™æ¡åŸåˆ™æ›´å¤šè¿˜æ˜¯åœ¨æŒ‡å¯¼ä»£ç å±‚é¢çš„è®¾è®¡ï¼›ä¸–ç•Œæ˜¯åŠ¨æ€å‘å±•çš„ï¼Œæ²¡æœ‰ä¸€æˆä¸å˜çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå¯¹äºä»£ç ï¼Œå¯æ‰©å±•æ˜¯å¿…ç„¶çš„éœ€æ±‚ï¼Œé‚£ä¸ºä»€ä¹ˆå¯¹ä¿®æ”¹å…³é—­å‘¢ï¼Ÿå¯èƒ½æ›´å¤šè¿˜æ˜¯å¯¹åŸç³»ç»Ÿçš„ä¾µå…¥å§ï¼Œä½ ä¸çŸ¥é“ä½ çš„ä½¿ç”¨æ–¹å¯¹ä½ åšå‡ºäº†æ€ä¹ˆæ ·çš„å‡è®¾ï¼Œæ€»ä¹‹ç›®å‰ä¸ºæ­¢ä¸–ç•Œå’Œå¹³ï¼Œä½†å½“ä½ ä¿®æ”¹äº†ä½ çš„è¡Œä¸ºï¼Œå‡è®¾è¢«æ‰“ç ´ï¼Œä¸–ç•Œå°±å´©å¡Œäº†
é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle, LSPï¼‰ å­ç±»å¿…é¡»èƒ½æ— ç¼æ›¿æ¢çˆ¶ç±»ï¼Œä¸”ä¸ç ´ååŸæœ‰ç³»ç»Ÿçš„æ­£ç¡®æ€§ã€‚å³çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»å¯æ›¿ä»£ï¼Œä¸”è¡Œä¸ºä¸€è‡´ã€‚
ä¸‰ ä¾èµ–ç®¡ç† åˆ†å±‚æ¶æ„åŸåˆ™ï¼ˆLayered Architecture Principleï¼‰ å°†ç³»ç»ŸæŒ‰èŒè´£åˆ’åˆ†ä¸ºæ¸…æ™°çš„å±‚æ¬¡ï¼Œå±‚é—´å•å‘ä¾èµ–ï¼Œç¦æ­¢è·¨å±‚è°ƒç”¨ã€‚
ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversion Principle, DIPï¼‰ é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”ä¾èµ–æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”ä¾èµ–æŠ½è±¡ã€‚
å›› å¯æ‰©å±•æ€§ æ¼”è¿›å¼æ¶æ„åŸåˆ™ï¼ˆEvolutionary Architectureï¼‰ æ¶æ„è®¾è®¡åº”é¢„ç•™æ‰©å±•ç©ºé—´ï¼Œæ”¯æŒç³»ç»Ÿéšä¸šåŠ¡éœ€æ±‚é€æ­¥æ¼”è¿›ï¼Œè€Œéè¿½æ±‚ â€œä¸€æ­¥åˆ°ä½â€ çš„å®Œç¾è®¾è®¡ã€‚
äº” å®‰å…¨(ä»£ç å®‰å…¨ï¼ŒæœåŠ¡å®‰å…¨ï¼Œä¸šåŠ¡å®‰å…¨ç­‰) å®‰å…¨æ€§åŸåˆ™ï¼ˆSecurity by Designï¼‰ å°†å®‰å…¨æ€§åµŒå…¥æ¶æ„è®¾è®¡çš„æ¯ä¸ªç¯èŠ‚ï¼Œè€Œéäº‹åè¡¥ä¸ã€‚
...</p></div><footer class=entry-footer><span title='2023-04-16 00:00:00 +0000 UTC'>2023-04-16</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2023-04-16&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;71 words</footer><a class=entry-link aria-label="post link to è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™" href=https://duck-dd.github.io/posts/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Golang schedule</h2></header><div class=entry-content><p>å†™åœ¨å‰é¢ runtimeåŒ…å®ç°äº†æ‰€æœ‰goroutine schedulerã€memory allocatorã€garbage collectorç»†èŠ‚ï¼Œç†è®ºä¸Šå¯ä»¥ä»runtimeåŒ…è·å–ä¸€åˆ‡ä¿¡æ¯ï¼Œæ²¡æœ‰ç›´æ¥æ€¼æºç ï¼Œè€Œæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼ˆç›´æ¥åƒå¤§ä½¬ä»¬åƒå‰©ä¸‹çš„ï¼‰ã€‚
æœé›†åˆ°çš„ææ–™ï¼Œå¤§å®¶éƒ½æ˜¯åŸºäºä¸åŒçš„goç‰ˆæœ¬åšçš„åˆ†æï¼Œè€Œgoç‰ˆæœ¬è¿­ä»£è°ƒåº¦ç®—æ³•ä¹Ÿåœ¨æŒç»­æ›´æ–°ï¼Œæ‰€ä»¥æ•´ç†çš„å¯èƒ½æœ‰äº›ä¹±ã€‚ä½†æ˜¯å¯ä»¥ä¿è¯çš„æ˜¯ï¼Œæ‰€æœ‰ææ–™éƒ½æ˜¯GM->GMPæ¼”åŒ–åçš„ææ–™ã€‚
GM go1.1ç‰ˆæœ¬ä»¥å‰ï¼Œè°ƒåº¦ä½¿ç”¨GMæ¨¡å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç®€å•çš„ç†è§£GMæ¨¡å‹ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªå§‹ç»ˆæ‰§è¡Œçš„è°ƒåº¦å‡½æ•°scheduleä¸åœçš„æ‰§è¡Œè°ƒåº¦è®¡ç®—ï¼Œå½“æŸä¸ªMçš„Gæ‰§è¡Œå®Œæˆäº†ï¼Œè°ƒåº¦å™¨å°±æŠŠè¿™ä¸ªMæ”¾å›Mé˜Ÿåˆ—ï¼Œå¯ç»‘å®šæ‰§è¡Œå…¶ä»–Gï¼ˆå¦‚æœæŸä¸ªM+Gå‘ç”Ÿäº†syscallï¼Œé‚£ä¹ˆæœ¬æ¥å¹¶å‘åº¦æ˜¯é€šè¿‡Mæ•°é‡æ§åˆ¶çš„ï¼Œæ­¤æ—¶å¹¶å‘åº¦å°±é™ä½äº†ï¼Ÿï¼‰ï¼›å¦‚æœGæ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºæ–°çš„Gï¼Œä¼šå°†æ–°çš„Gæ”¾å…¥åˆ°Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—çš„æ“ä½œæœ‰ä¸€æŠŠå…¨å±€é”ï¼Œè¿™å¯¼è‡´äº†å„ä¸ªMå¯¹Gå…¨å±€é˜Ÿåˆ—çš„æ“ä½œå­˜åœ¨ä¸¥é‡çš„ç«äº‰ã€‚
ä¸‹é¢è¿™æ®µå®Œå…¨æ˜¯æˆ‘çš„è‡†æµ‹ï¼Œè¯·åˆ«å¤ªç›¸ä¿¡ï¼š
ç®€å•æ¦‚æ‹¬å‘¢ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæœ‰ï¼š
Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—(ä»¥ä¸‹ä¹Ÿå¯èƒ½ç®€ç§°Gå¯æ‰§è¡Œé˜Ÿåˆ—) Må¯ç”¨é˜Ÿåˆ— è°ƒåº¦å™¨è¦åšçš„äº‹å°±æ˜¯ï¼š
ä»Gçš„å¯æ‰§è¡Œé˜Ÿåˆ—å–Gå¹¶ä»Mçš„å¯ç”¨é˜Ÿåˆ—å–Mï¼Œå°†äºŒè€…ç»‘å®šå¼€å§‹æ‰§è¡ŒG å¯¹äºå·²ç»æ‰§è¡Œå®Œçš„Gï¼Œé”€æ¯Gå¹¶ç«‹å³å°†Mé‡Šæ”¾å›Må¯ç”¨é˜Ÿåˆ—ä¾›åç»­ä½¿ç”¨ é‚£ä¹ˆGMæ¨¡å‹æœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ
(é‡ç‚¹é—®é¢˜)å•ä¸€çš„å…¨å±€mutex(sched.lock)å’Œé›†ä¸­çŠ¶æ€ç®¡ç† mutexéœ€è¦ä¿æŠ¤æ‰€æœ‰ä¸å…¨å±€goroutineé˜Ÿåˆ—ç›¸å…³æ“ä½œ(åˆ›å»ºã€å®Œæˆã€é‡æ’ç­‰ç­‰)ï¼Œç«äº‰ä¸¥é‡ (é‡ç‚¹é—®é¢˜)per-Må†…å­˜(M.mcache)é—®é¢˜ æ¯ä¸ªMéƒ½éœ€è¦ä¸€ä¸ªmcacheï¼Œä¼šå¯¼è‡´èµ„æºæ¶ˆè€—è¿‡å¤§(æ¯ä¸ªmcacheå¯ä»¥å¸çº³åˆ°2MBçš„å†…å­˜ç¼“å­˜å’Œå…¶ä»–ç¼“å­˜) ä¸¾ä¸ªæ —å­ï¼Œä¸€ä¸ªé™·å…¥syscallçš„Må¹¶ä¸éœ€è¦ä½¿ç”¨cacheï¼Œä½†æ˜¯åœ¨å…¨éƒ¨çš„Mä¸­ï¼Œé™·å…¥ç³»ç»Ÿè°ƒç”¨çš„Mä¸æ‰§è¡Œgoroutineçš„Mçš„æ¯”ä¾‹å¯èƒ½æ˜¯N:1(N>>1)ï¼Œè¿™å°±å¯¼è‡´äº†N/(N+1)æ¯”ä¾‹çš„mcacheåœ¨é—²ç½® æ•°æ®å±€éƒ¨æ€§å·®: ä¸¾ä¸ªæ —å­ï¼ŒM1æ‰§è¡ŒG1ï¼Œæ­¤æ—¶åˆ›å»ºäº†G2ï¼ŒG2é€šå¸¸æ˜¯ç«‹åˆ»è¿›å…¥äº†Gå…¨å±€å¯æ‰§è¡Œé˜Ÿåˆ—ï¼Œè€Œæ­¤æ—¶M1è¿˜åœ¨æ‰§è¡ŒG1ï¼Œæ‰€ä»¥G2é€šå¸¸è¢«å…¶ä»–Mæ‰§è¡Œï¼Œä½†æ˜¯G1å’ŒG2é€šå¸¸å¼ºç›¸å…³ï¼Œæ‰€ä»¥G2æœ€å¥½ä¹Ÿåœ¨M1ä¸Šæ‰§è¡Œï¼Œå› ä¸ºG2å¯¹M1çš„ç¼“å­˜å‘½ä¸­ç‡æ›´é«˜ goroutineä¼ é€’é—®é¢˜ goroutine(G)äº¤æ¥(G.nextg)ï¼ŒMä¹‹é—´ä¼šç»å¸¸äº¤æ¥å¯è¿è¡Œçš„G å†é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯Gç©ºè½¬ï¼Œæœ¬æ¥èƒ½å¤Ÿå¥½å¥½åœ¨ä¸€ä¸ªMä¸Šæ‰§è¡Œå®Œï¼Œä½†æ˜¯ç”±äºå…¨å±€é˜Ÿåˆ—çš„å­˜åœ¨ï¼ŒGä¸€æ—¦å›å…¨å±€é˜Ÿåˆ—äº†ï¼Œä¸‹æ¬¡å°±ä¸çŸ¥é“è¢«å“ªä¸ªMå–èµ°äº†ï¼Œæ‰€ä»¥å«â€œç©ºè½¬â€ï¼›MåŠ è½½Gçš„ä¸Šä¸‹æ–‡æ˜¯æœ‰å¼€é”€çš„ï¼Œæ‰€ä»¥ç©ºè½¬ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ é¢‘ç¹çš„çº¿ç¨‹é˜»å¡/è§£é˜»å¡ syscallsæƒ…å†µä¸‹ï¼Œçº¿ç¨‹ç»å¸¸è¢«é˜»å¡å’Œè§£é˜»å¡ï¼Œå¢åŠ äº†å¾ˆå¤šé¢å¤–å¼€é”€ é€šä¿—ç‚¹è¯´ï¼ŒM+G syscallï¼ŒMé˜»å¡ï¼Œsyscallå®Œæˆåï¼ŒMè§£é˜»å¡ç»§ç»­æ‰§è¡ŒGï¼ˆå¦‚æœæ˜¯é€šè¿‡Mæ•°é‡æ§åˆ¶å¹¶å‘åº¦ï¼Œè¿™æ˜¯ä¸æ˜¯å°±å¯¼è‡´äº†å¹¶å‘åº¦é™ä½ï¼Ÿï¼‰ GMP åŸºäºä»¥ä¸Šè¯´çš„GMçš„é—®é¢˜ï¼Œgo1.1ä»¥åå¼€å§‹ä½¿ç”¨GMPè°ƒåº¦æ¨¡å‹ã€‚ Gã€Mã€Pçš„å®šä¹‰å¦‚ä¸‹(***/src/runtime/runtime2.go)ã€‚
type g struct { // Stack parameters. // stack describes the actual stack memory: [stack.lo, stack.hi). // stackguard0 is the stack pointer compared in the Go stack growth prologue. // It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption. // stackguard1 is the stack pointer compared in the C stack growth prologue. // It is stack.lo+StackGuard on g0 and gsignal stacks. // It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash). stack stack // offset known to runtime/cgo stackguard0 uintptr // offset known to liblink stackguard1 uintptr // offset known to liblink _panic *_panic // innermost panic - offset known to liblink _defer *_defer // innermost defer m *m // current m; offset known to arm liblink sched gobuf syscallsp uintptr // if status==Gsyscall, syscallsp = sched.sp to use during gc syscallpc uintptr // if status==Gsyscall, syscallpc = sched.pc to use during gc stktopsp uintptr // expected sp at top of stack, to check in traceback param unsafe.Pointer // passed parameter on wakeup atomicstatus uint32 stackLock uint32 // sigprof/scang lock; TODO: fold in to atomicstatus goid int64 schedlink guintptr waitsince int64 // approx time when the g become blocked waitreason waitReason // if status==Gwaiting preempt bool // preemption signal, duplicates stackguard0 = stackpreempt preemptStop bool // transition to _Gpreempted on preemption; otherwise, just deschedule preemptShrink bool // shrink stack at synchronous safe point // asyncSafePoint is set if g is stopped at an asynchronous // safe point. This means there are frames on the stack // without precise pointer information. asyncSafePoint bool paniconfault bool // panic (instead of crash) on unexpected fault address gcscandone bool // g has scanned stack; protected by _Gscan bit in status throwsplit bool // must not split stack // activeStackChans indicates that there are unlocked channels // pointing into this goroutine's stack. If true, stack // copying needs to acquire channel locks to protect these // areas of the stack. activeStackChans bool // parkingOnChan indicates that the goroutine is about to // park on a chansend or chanrecv. Used to signal an unsafe point // for stack shrinking. It's a boolean value, but is updated atomically. parkingOnChan uint8 raceignore int8 // ignore race detection events sysblocktraced bool // StartTrace has emitted EvGoInSyscall about this goroutine sysexitticks int64 // cputicks when syscall has returned (for tracing) traceseq uint64 // trace event sequencer tracelastp puintptr // last P emitted an event for this goroutine lockedm muintptr sig uint32 writebuf []byte sigcode0 uintptr sigcode1 uintptr sigpc uintptr gopc uintptr // pc of go statement that created this goroutine ancestors *[]ancestorInfo // ancestor information goroutine(s) that created this goroutine (only used if debug.tracebackancestors) startpc uintptr // pc of goroutine function racectx uintptr waiting *sudog // sudog structures this g is waiting on (that have a valid elem ptr); in lock order cgoCtxt []uintptr // cgo traceback context labels unsafe.Pointer // profiler labels timer *timer // cached timer for time.Sleep selectDone uint32 // are we participating in a select and did someone win the race? // Per-G GC state // gcAssistBytes is this G's GC assist credit in terms of // bytes allocated. If this is positive, then the G has credit // to allocate gcAssistBytes bytes without assisting. If this // is negative, then the G must correct this by performing // scan work. We track this in bytes to make it fast to update // and check for debt in the malloc hot path. The assist ratio // determines how this corresponds to scan work debt. gcAssistBytes int64 } type m struct { g0 *g // goroutine with scheduling stack morebuf gobuf // gobuf arg to morestack divmod uint32 // div/mod denominator for arm - known to liblink // Fields not known to debuggers. procid uint64 // for debuggers, but offset not hard-coded gsignal *g // signal-handling g goSigStack gsignalStack // Go-allocated signal handling stack sigmask sigset // storage for saved signal mask tls [6]uintptr // thread-local storage (for x86 extern register) mstartfn func() curg *g // current running goroutine caughtsig guintptr // goroutine running during fatal signal p puintptr // attached p for executing go code (nil if not executing go code) nextp puintptr oldp puintptr // the p that was attached before executing a syscall id int64 mallocing int32 throwing int32 preemptoff string // if != "", keep curg running on this m locks int32 dying int32 profilehz int32 spinning bool // m is out of work and is actively looking for work blocked bool // m is blocked on a note newSigstack bool // minit on C thread called sigaltstack printlock int8 incgo bool // m is executing a cgo call freeWait uint32 // if == 0, safe to free g0 and delete m (atomic) fastrand [2]uint32 needextram bool traceback uint8 ncgocall uint64 // number of cgo calls in total ncgo int32 // number of cgo calls currently in progress cgoCallersUse uint32 // if non-zero, cgoCallers in use temporarily cgoCallers *cgoCallers // cgo traceback if crashing in cgo call park note alllink *m // on allm schedlink muintptr lockedg guintptr createstack [32]uintptr // stack that created this thread. lockedExt uint32 // tracking for external LockOSThread lockedInt uint32 // tracking for internal lockOSThread nextwaitm muintptr // next m waiting for lock waitunlockf func(*g, unsafe.Pointer) bool waitlock unsafe.Pointer waittraceev byte waittraceskip int startingtrace bool syscalltick uint32 freelink *m // on sched.freem // these are here because they are too large to be on the stack // of low-level NOSPLIT functions. libcall libcall libcallpc uintptr // for cpu profiler libcallsp uintptr libcallg guintptr syscall libcall // stores syscall parameters on windows vdsoSP uintptr // SP for traceback while in VDSO call (0 if not in call) vdsoPC uintptr // PC for traceback while in VDSO call // preemptGen counts the number of completed preemption // signals. This is used to detect when a preemption is // requested, but fails. Accessed atomically. preemptGen uint32 // Whether this is a pending preemption signal on this M. // Accessed atomically. signalPending uint32 dlogPerM mOS // Up to 10 locks held by this m, maintained by the lock ranking code. locksHeldLen int locksHeld [10]heldLockInfo } type p struct { id int32 status uint32 // one of pidle/prunning/... link puintptr schedtick uint32 // incremented on every scheduler call syscalltick uint32 // incremented on every system call sysmontick sysmontick // last tick observed by sysmon m muintptr // back-link to associated m (nil if idle) mcache *mcache pcache pageCache raceprocctx uintptr deferpool [5][]*_defer // pool of available defer structs of different sizes (see panic.go) deferpoolbuf [5][32]*_defer // Cache of goroutine ids, amortizes accesses to runtimeÂ·sched.goidgen. goidcache uint64 goidcacheend uint64 // Queue of runnable goroutines. Accessed without lock. runqhead uint32 runqtail uint32 runq [256]guintptr // runnext, if non-nil, is a runnable G that was ready'd by // the current G and should be run next instead of what's in // runq if there's time remaining in the running G's time // slice. It will inherit the time left in the current time // slice. If a set of goroutines is locked in a // communicate-and-wait pattern, this schedules that set as a // unit and eliminates the (potentially large) scheduling // latency that otherwise arises from adding the ready'd // goroutines to the end of the run queue. runnext guintptr // Available G's (status == Gdead) gFree struct { gList n int32 } sudogcache []*sudog sudogbuf [128]*sudog // Cache of mspan objects from the heap. mspancache struct { // We need an explicit length here because this field is used // in allocation codepaths where write barriers are not allowed, // and eliminating the write barrier/keeping it eliminated from // slice updates is tricky, moreso than just managing the length // ourselves. len int buf [128]*mspan } tracebuf traceBufPtr // traceSweep indicates the sweep events should be traced. // This is used to defer the sweep start event until a span // has actually been swept. traceSweep bool // traceSwept and traceReclaimed track the number of bytes // swept and reclaimed by sweeping in the current sweep loop. traceSwept, traceReclaimed uintptr palloc persistentAlloc // per-P to avoid mutex _ uint32 // Alignment for atomic fields below // The when field of the first entry on the timer heap. // This is updated using atomic functions. // This is 0 if the timer heap is empty. timer0When uint64 // Per-P GC state gcAssistTime int64 // Nanoseconds in assistAlloc gcFractionalMarkTime int64 // Nanoseconds in fractional mark worker (atomic) gcBgMarkWorker guintptr // (atomic) gcMarkWorkerMode gcMarkWorkerMode // gcMarkWorkerStartTime is the nanotime() at which this mark // worker started. gcMarkWorkerStartTime int64 // gcw is this P's GC work buffer cache. The work buffer is // filled by write barriers, drained by mutator assists, and // disposed on certain GC state transitions. gcw gcWork // wbBuf is this P's GC write barrier buffer. // // TODO: Consider caching this in the running G. wbBuf wbBuf runSafePointFn uint32 // if 1, run sched.safePointFn at next safe point // Lock for timers. We normally access the timers while running // on this P, but the scheduler can also do it from a different P. timersLock mutex // Actions to take at some time. This is used to implement the // standard library's time package. // Must hold timersLock to access. timers []*timer // Number of timers in P's heap. // Modified using atomic instructions. numTimers uint32 // Number of timerModifiedEarlier timers on P's heap. // This should only be modified while holding timersLock, // or while the timer status is in a transient state // such as timerModifying. adjustTimers uint32 // Number of timerDeleted timers in P's heap. // Modified using atomic instructions. deletedTimers uint32 // Race context used while executing timer functions. timerRaceCtx uintptr // preempt is set to indicate that this P should be enter the // scheduler ASAP (regardless of what G is running on it). preempt bool pad cpu.CacheLinePad } GMPæ¨¡å‹çš„ä¸€äº›æ¦‚å¿µ ä¸Šé¢Mä¸­æœ‰ä¸¤ä¸ªgéœ€è¦å…³æ³¨ä¸‹ï¼Œcurgå’Œg0ã€‚ curgå°±æ˜¯Må½“å‰ç»‘å®šçš„Gã€‚ g0æ˜¯å¸¦æœ‰è°ƒåº¦æ ˆçš„goroutineï¼Œæ™®é€šçš„Gçš„æ ˆæ˜¯åˆ†é…åœ¨å †ä¸Šçš„å¯å¢é•¿çš„æ ˆï¼Œè€Œg0çš„æ ˆæ˜¯Må¯¹åº”çš„çº¿ç¨‹çš„æ ˆã€‚æ‰€æœ‰è°ƒåº¦ç›¸å…³çš„ä»£ç ï¼Œä¼šå…ˆåˆ‡æ¢åˆ°è¯¥goroutineçš„æ ˆä¸­æ‰§è¡Œã€‚å³ï¼Œçº¿ç¨‹çš„æ ˆä¹Ÿæ˜¯ç”¨çš„gå®ç°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨çš„OSã€‚
...</p></div><footer class=entry-footer><span title='2021-08-21 00:00:00 +0000 UTC'>2021-08-21</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2021-08-21&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;1904 words</footer><a class=entry-link aria-label="post link to Golang schedule" href=https://duck-dd.github.io/posts/go-schedule/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>DNS</h2></header><div class=entry-content><p>DNSï¼ŒæŒºå¥½ï¼Œå•¥æ˜¯DNSï¼Ÿ ä¸€äº›æ¦‚å¿µ FQDN: Fully Qualified Domain Nameï¼Œå…¨é™å®šåŸŸåï¼ŒåŒæ—¶å¸¦æœ‰ä¸»æœºåå’ŒåŸŸåçš„åç§°ï¼ˆé€šè¿‡ç¬¦å·â€œ.â€ï¼‰ï¼Œä¾‹å¦‚ä¸€ä¸ªFQDNæ˜¯www.baidu.comï¼Œwwwæ˜¯ä¸»æœºåï¼Œbaidu.comæ˜¯åŸŸåã€‚å†ä¸¾ä¾‹ï¼Œæˆ‘æ˜¯æµ·æ·€å´å½¦ç¥–ï¼Œä½ æ˜¯**å´å½¦ç¥–ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜çŸ¥é“ï¼Œæœ‰ä¸ªäººå°±å«å´å½¦ç¥–ï¼Œè¿™ä¹ˆå¤šå´å½¦ç¥–æˆ‘ä»¬éƒ½æ²¡æœ‰æ··æ·†ï¼Œå› ä¸ºåå­—å‰é¢åŠ ä¸Šäº†åœ°åŸŸï¼Œä¹Ÿå°±æ˜¯åŸŸåã€‚ä»é€»è¾‘ä¸Šçœ‹FQDNï¼Œå°±æ˜¯ä¸»æœºåçš„å®Œæ•´è¡¨è¾¾ï¼Œç±»ä¼¼ç»å¯¹è·¯å¾„ï¼Œé€šè¿‡ä¸€ä¸ªFQDNæˆ‘ä»¬å¯ä»¥åœ¨å…¨ç½‘å†…é”å®šä¸»æœºä½ç½®ã€‚ cache only DNS server : æœ‰.çš„zone fileçš„DNSæœåŠ¡å™¨ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•è§£ææ•°æ®ï¼Œå®Œå…¨é æŸ¥è¯¢æ¥è·å–æ•°æ®æº forwarding DNS server : è¿.çš„zone fileéƒ½æ²¡æœ‰ï¼Œå®Œå…¨é å‘ä¸Šå±‚æŸ¥è¯¢è·å–æ•°æ®ï¼›å½“ä½¿ç”¨forwardingåŠŸèƒ½æ—¶ï¼Œå³ä½¿æœ¬èº«æœ‰.çš„zone fileï¼Œä¹Ÿä¸ä¼šå‘.æŸ¥è¯¢ï¼Œè¯¥DNS serverè¿˜æ˜¯ä¼šå°†æŸ¥è¯¢å®Œå…¨å§”æ‰˜ç»™ä¸Šå±‚ã€‚ CIDR:Classless Inter-Domain Routing, æ— ç±»åŸŸé—´è·¯ç”±ï¼Œä¸æŒ‰å›ºå®šçš„å­—èŠ‚æ¥åˆ’åˆ†ç½‘ç»œç¼–å·ï¼Œå¯ä»¥ä½¿ç”¨IPåœ°å€ä¸­ä»»ä½•ç›¸é‚»ä½çš„æ•°å­—ä½œä¸ºç½‘ç»œç¼–å·ï¼Œä¾‹å¦‚æŸæœºæ„éœ€è¦2ä¸ªBç±»ç½‘ç»œå¤§å°çš„ç©ºé—´ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å‰15ä½ä½œä¸ºç½‘ç»œç¼–å·ï¼Œä¾‹å¦‚127.127.0.0/15 Aç±»,Bç±»,Cç±»ç½‘ç»œï¼šAç±»ç½‘ç»œä»¥IPåœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚(å‰8ä½)ä½œä¸ºç½‘ç»œç¼–å·,å‰©ä¸‹çš„24ä½ä¸ºä¸»æœº;Bç±»ç½‘ç»œå‰ä¸¤ä¸ªå­—èŠ‚ä¸ºç½‘ç»œç¼–å·;Cç±»ç½‘ç»œå‰ä¸‰ä¸ªå­—èŠ‚ä¸ºç½‘ç»œç¼–å· DNSåšä»€ä¹ˆ ipv4 32bitï¼Œipv6 128bitï¼Œå³ä½¿è½¬æˆ10/16è¿›åˆ¶ä¹Ÿæ²¡äººè®°å¾—ä½ï¼Œä½†æ˜¯äººç±»çš„å¤´è„‘å–„äºè®°å½•åå­—ï¼Œæ‰€ä»¥å¯ä»¥æä¸€ä¸ªåå­—è·ŸIPå¯¹åº”ï¼Œåå­—è·ŸIPçš„å¯¹åº”å…³ç³»è§£æï¼Œå°±æ˜¯DNSæä¾›çš„æœåŠ¡ã€‚
ä¸»æœºåçš„è§£ææœ‰ä¸€ä¸ªå‘å±•çš„è¿‡ç¨‹ã€‚
æœ€åˆæ²¡æœ‰DNSäººä»¬å¦‚ä½•è®°ä½å„ä¸ªæœåŠ¡åå­—è·ŸIPçš„å¯¹åº”å…³ç³»å‘¢ï¼Ÿå°±æ˜¯å†™åœ¨/etc/hostsæ–‡ä»¶é‡Œï¼Œè‡ªå·±å†™éº»çƒ¦ï¼Œé‚£å°±ç»Ÿä¸€å†™åˆ°ä¸­å¿ƒï¼Œä½¿ç”¨çš„æ—¶å€™ä»ä¸­å¿ƒæ‹‰å–ã€‚
è¿™ä¸ªä¸­å¿ƒå°±æ˜¯internicï¼Œä¸»æœºåIPå¯¹åº”å…³ç³»ä¿®æ”¹æ—¶ï¼Œæ³¨å†Œåˆ°internicä¸­ï¼›ç”¨æˆ·å‡†å¤‡ä¸Šç½‘ä¹‹å‰å…ˆå»internicæŠŠæœ€æ–°çš„æ–‡ä»¶æ‹‰ä¸‹æ¥ï¼Œæ”¾åœ¨è‡ªå·±çš„/etc/hostsã€‚
è¿™ç§æ–¹å¼é—®é¢˜å¾ˆå¤šï¼š
ä¾‹å¦‚internicæ‹‰å–çš„æ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œæ¯æ¬¡æ‰“å¼€ç”µè„‘å…ˆæ‹‰ä¸ª100Gçš„æ–‡ä»¶ç„¶åå†å¼€å§‹ä¸Šç½‘ï¼Œå°±ç®—ä½ ç£ç›˜æ‰›å¾—ä½ï¼Œä½ çš„ç½‘ç»œä¸å¤Ÿå¥½ä¹Ÿå¾ˆéš¾å—ï¼ˆå› ä¸ºä½ ä¸èƒ½æ˜ç¡®è¯´æ˜è‡ªå·±ä¸Šç½‘éœ€è¦çš„ä¸»æœºåï¼Œåªèƒ½æ‹‰å…¨é‡ï¼Œäº’è”ç½‘ä¸šåŠ¡å¢é•¿è¯¥æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼‰ ä¾‹å¦‚è¿™ç§æ–¹å¼æ˜¯é™æ€çš„ï¼Œéœ€è¦ç”¨æˆ·ä¸»åŠ¨è§¦å‘æ›´æ–°è¡Œä¸ºï¼ˆä½ æ€»ä¸èƒ½è®©ä¸€ä¸ªäººå¼€æœºé»˜è®¤å°±å»ä¸‹è½½100Gçš„æ–‡ä»¶ï¼Œä»–ä¸å¯èƒ½ç»™ä½ æˆæƒçš„ï¼‰ï¼›è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç½‘ç˜¾å°‘å¹´ä¸‹åˆ6ç‚¹ç¡çœ¼æƒºå¿ªçš„èµ·åºŠï¼Œæ‰“å¼€ç”µè„‘å…ˆä»internicä¸‹è½½äº†åŠä¸ªå°æ—¶æ–‡ä»¶ï¼ŒæœŸé—´å»æ´—æ¼±åƒäº†æ—©é¥­ï¼Œç„¶åå¼€å¼€å¿ƒå¿ƒå¼€å§‹æ‰“æ¸¸æˆï¼Œçªç„¶ï¼Œæ¸¸æˆæ‰çº¿äº†ï¼Œä¸Šè´´å§ä¸€æŸ¥ï¼Œå¤§å®¶éƒ½è¯´å¿«å»é‡æ–°æ‹‰å–internicçš„hostsæ–‡ä»¶å‘€ï¼Œæ¸¸æˆåŸŸåè¢«å‹å•†æ”»å‡»æ¢åŸŸåäº†ï¼Œè¿™è¿˜å¥½ï¼Œå°‘å¹´éª‚éª‚å’§å’§ä¸‹è½½ä¸ªæ–‡ä»¶å°±å®Œäº‹äº†ï¼Œè¦æ˜¯è´´å§éƒ½ä¸Šä¸å»å°±æ›´è®©äººæ‡µé€¼äº† æ—¶ä»£çš„è¿›æ­¥æ€»æ˜¯èªæ˜äººæ¨åŠ¨çš„ã€‚Berkeleyä¸€ä¸ªåŒå­¦å°±è§‰å¾—è¿™ç§æ–¹å¼ä¸å¤ªè¡Œï¼Œäºæ˜¯ä»–å°±æå‡ºä¸€å¥—BINDç³»ç»Ÿæä¾›DNSæœåŠ¡ã€‚
BINDï¼ŒBerkeley Internet Name Domain BINDç®¡ç†æ–¹å¼ BINDæ˜¯ä¸€å¥—é˜¶å±‚å¼çš„ç®¡ç†ä¸»æœºåä¸IPå¯¹åº”å…³ç³»çš„ç³»ç»Ÿã€‚
é˜¶å±‚å¼ï¼Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºæ ‘çŠ¶ç»“æ„çš„ä¸åŒå±‚çº§ï¼Œä¸‹é¢æ¥ç®€å•åˆ†æä¸‹é˜¶å±‚å¼ã€‚
ä»¥www.baidu.comä¸ºä¾‹ï¼Œæœ€ä¸Šå±‚æ ¹æœåŠ¡å™¨ï¼Œdomain nameæ˜¯"."ï¼Œç„¶åæœ‰ä¸‰ä¸ªhostname â€œnet com cnâ€ï¼Œå†åˆ°ç¬¬ä¸‰å±‚ï¼Œhostnameåˆ†åˆ«æ˜¯pdd baidu tencentï¼Œæ­¤æ—¶domain nameä¸º.com. ï¼Œä»¥æ­¤ç±»æ¨ã€‚ã€‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ¯ä¸€ä¸ª".â€œéƒ½æ‹†åˆ†domain name&amp;hostnameï¼Œä¾‹å¦‚ä¸Šå›¾ video.www.baidu.com ï¼Œå…¶ä¸­domain nameä¸ºbaidu.com.ï¼Œhostnameä¸ºvideo.wwwã€‚æŒ‰ç…§ä¸Šè¿°æ–¹å¼åˆ†å±‚ï¼Œæ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼ˆæƒå¨ï¼‰åªè´Ÿè´£è‡ªå·±çš„ä¸€å°æ’®åŸŸåï¼Œè¿™å°±é¿å…äº†å¤§é‡æ•°æ®é›†ä¸­çš„é—®é¢˜ã€‚
DNSé˜¶å±‚ç³»ç»Ÿçš„æœ€ä¸Šæ–¹æ˜¯ä¸€ä¸ªâ€."ï¼Œrootï¼Œæ˜¯æ ¹æœåŠ¡å™¨ï¼Œæœ¬è´¨ä¸Šè®²ï¼Œè¿™é‡Œçš„".â€œåé¢å…¶å®æ˜¯ç©ºæ ‡ç­¾ï¼Œè¿™æ˜¯ä¸ºrootä¿ç•™çš„ï¼›æ ¹æœåŠ¡å™¨ä¸‹ä¸€å±‚ç®¡ç†çš„æ˜¯Top Level Domains(TLD)ï¼Œä¾‹å¦‚com. net. org.ç­‰ç­‰ã€‚
æ¯ä¸ªä¸Šä¸€å±‚çš„DNSæœåŠ¡å™¨ï¼Œæ‰€è®°å½•çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸‹ä¸€å±‚çš„ä¸»æœºåï¼›å†ä¸‹ä¸€å±‚ï¼Œæˆæƒç»™å†å†ä¸‹å±‚æŸä¸ªä¸»æœºç®¡ç†ï¼Œè¿™å°±æ˜¯åˆ†å±‚ç®¡ç†ï¼›DNSåˆ†å±‚æœ€å¤šåˆ°127å±‚(å®é™…ä¸Šä¸ä¼šç”¨åˆ°è¿™ä¹ˆå¤š)ï¼Œæ¯ä¸€å±‚æœ€å¤š63ä¸ªå­—ç¬¦(ä¸åŒ…æ‹¬â€.")ï¼›åŒä¸€å±‚å†…ä¸å…è®¸åŒåï¼Œç¡®ä¿å”¯ä¸€æ€§ã€‚
BINDæŸ¥è¯¢æµç¨‹ å½“æµè§ˆå™¨è¾“å…¥ https://www.baidu.com ï¼Œå…ˆæŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œå†æŸ¥/etc/hostsæ–‡ä»¶ï¼Œéƒ½æ‰¾ä¸åˆ°www.baidu.comçš„è§£ææ—¶ï¼Œä¼šæ ¹æ®/etc/resolv.confæ–‡ä»¶å†…é…ç½®çš„DNSæœåŠ¡å™¨åœ°å€ï¼Œå»è¿›è¡ŒDNSè§£æï¼Œè¯¢é—®www.baidu.comçš„Aè®°å½• clientç¬¬ä¸€æ­¥æ‰¾åˆ°çš„DNSæœåŠ¡å™¨é€šå¸¸ä¸ºè¿è¥å•†æä¾›çš„local DNSæœåŠ¡å™¨ï¼Œlocal DNSä½œä¸ºåç§°æœåŠ¡å™¨ï¼Œæ¥æ”¶clientç«¯çš„é€’å½’æŸ¥è¯¢è¯·æ±‚ï¼Œè‹¥local DNSæœåŠ¡å™¨è‡ªèº«æ²¡æœ‰www.baidu.comçš„è§£æç»“æœï¼Œåˆ™å‘.DNSæœåŠ¡å™¨å‘èµ·è§£æè¯·æ±‚ï¼Œè¯¢é—®www.baidu.comæ˜¯å•¥Aè®°å½•å‘¢ï¼Ÿ å…¶å®é€’å½’æŸ¥è¯¢å®é™…è¿‡ç¨‹ä¸­ï¼Œlocal DNSè‹¥æœªå‘½ä¸­ç¼“å­˜ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æŸ¥è¯¢æ ¹æœåŠ¡å™¨ï¼Œä»–ä¼šå¯»æ‰¾å·²çŸ¥æœ€è¿‘çš„åç§°æœåŠ¡å™¨(å¾…å®éªŒç¡®è®¤) .å¹¶ä¸çŸ¥é“www.baidu.comçš„IPï¼Œå®ƒä¼šå‘Šè¯‰ä½ æˆ‘åªçŸ¥é“.comï¼ŒIPç»™ä½ ï¼Œä½ å»é—®å®ƒå§ ç„¶ålocal DNSè·å–åˆ°äº†.comçš„ä¿¡æ¯åï¼Œå¼€å§‹å‘.comè¯¢é—®www.baidu.comçš„è§£æç»“æœ .comä¹Ÿä¸çŸ¥é“www.baidu.comçš„IPåœ°å€ï¼Œå®ƒä¼šè¯´ï¼Œæˆ‘åªè®¤è¯†baidu.comï¼Œä½ å»é—®å®ƒå§ .comè¿”å›çš„ä¸€èˆ¬æ˜¯baidu.comçš„å¤šä¸ªNSåŸŸå(åŠå…¶IP,èƒ¶æ°´è®°å½•)ï¼Œå¦‚ä¸‹ä¾‹å›¾ï¼Œé‚£ä¹ˆå¦‚ä½•é€‰æ‹©æƒå¨å‘¢ï¼ŸBINDåç§°æœåŠ¡å™¨ä½¿ç”¨RTT(roundtrip time)çš„åº¦é‡æ–¹å¼æ¥é€‰æ‹©å¯¹åŒä¸€åŒºåŸŸä¸­çš„åç§°æœåŠ¡å™¨è¿›è¡Œé€‰æ‹©ï¼Œå³é€‰æ‹©RTTæœ€å°çš„é‚£ä¸ªåç§°æœåŠ¡å™¨(dig +traceæŠ“åŒ…å¹¶æ²¡çœ‹åˆ°å¯¹RTTçš„æ¢æµ‹ï¼Œç°è±¡ä¸Šçœ‹æ˜¯ä»ns*.baidu.comé‡Œé¢éšæœºé€‰æ‹©çš„ï¼Ÿ) ...</p></div><footer class=entry-footer><span title='2021-05-13 00:00:00 +0000 UTC'>2021-05-13</span>&nbsp;Â·&nbsp;åˆ›å»ºäº:&nbsp;2021-05-13&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;847 words</footer><a class=entry-link aria-label="post link to DNS" href=https://duck-dd.github.io/posts/dns/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://duck-dd.github.io/>Duck</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>